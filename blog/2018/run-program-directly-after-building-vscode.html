<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1.0, maximum-scale=1"><meta name=description content=""><meta name=author content="Zachary Snow"><title>Run a program directly after building in VS Code</title><base href=../../ ><link href="https://fonts.googleapis.com/css?family=Open+Sans" rel=stylesheet><link rel=stylesheet type=text/css href=css/style.css><link rel=alternate type=application/rss+xml title="The Blog of Zachary Snow" href=feed.rss><div class=wrap><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><h1><a class=navbar-brand href=/ >The Blog of Zachary Snow</a></h1><button id=navbar-toggler class=navbar-toggler type=button aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation"><span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=index.html>Home</a><li class=nav-item><a class=nav-link href=about.html>About</a></ul><div class="social my-2 my-lg-0"><a href=https://twitter.com/smack0007 class=twitter title=Twitter><span class=icon-twitter></span></a> <a href=https://github.com/smack0007 class=github title=Github><span class=icon-github></span></a> <a href=https://paypal.me/smack0007 class=coffee title="Buy Me a Coffee"><span class=icon-mug></span></a> <a href=feed.rss class=rss title=RSS><span class=icon-rss></span></a></div></div></nav><main class=container><div class=posts><div class=post><h2><a href=blog/2018/run-program-directly-after-building-vscode.html>Run a program directly after building in VS Code</a></h2><div class=meta><span class=date><span class=icon-calendar></span>April 11, 2018</span> <span class=category><span class=icon-folder></span>.net</span> <span class=tags><span class=icon-price-tags></span>.net, .netcore, msbuild, vscode</span></div><div class=content><p>Whenever I have a program that is just a generator of some kind I like to have that program execute directly after having built the program successfully. I'm going to show how to run the program via the dotnet cli but this trick can easily be applied to regular .NET programs or any program which is built using MSBuild.<p>Add the following to your csproj file:
<pre><code class=language-xml><span class=xmlDelimiter>&lt;</span><span class=xmlName>Target</span> <span class=xmlAttribute>Name</span><span class=xmlDelimiter>=</span><span class=xmlAttributeQuotes>"</span><span class=xmlAttributeValue>ExecuteAfterBuild</span><span class=xmlAttributeQuotes>"</span> <span class=xmlAttribute>AfterTargets</span><span class=xmlDelimiter>=</span><span class=xmlAttributeQuotes>"</span><span class=xmlAttributeValue>AfterBuild</span><span class=xmlAttributeQuotes>"</span> <span class=xmlAttribute>Condition</span><span class=xmlDelimiter>=</span><span class=xmlAttributeQuotes>"</span><span class=xmlAttributeValue> $(ExecuteAfterBuild) == true </span><span class=xmlAttributeQuotes>"</span><span class=xmlDelimiter>></span>
    <span class=xmlDelimiter>&lt;</span><span class=xmlName>Exec</span> <span class=xmlAttribute>WorkingDirectory</span><span class=xmlDelimiter>=</span><span class=xmlAttributeQuotes>"</span><span class=xmlAttributeValue>$(OutputPath)</span><span class=xmlAttributeQuotes>"</span> <span class=xmlAttribute>Command</span><span class=xmlDelimiter>=</span><span class=xmlAttributeQuotes>"</span><span class=xmlAttributeValue>dotnet $(AssemblyName).dll</span><span class=xmlAttributeQuotes>"</span> <span class=xmlDelimiter>/></span>
<span class=xmlDelimiter>&lt;/</span><span class=xmlName>Target</span><span class=xmlDelimiter>></span></code></pre><p>This instructs MSBuild to execute the dotnet cli in the output directory of the assembly if the property <code>ExecuteAfterBuild</code> is set to true. This can be accomplished via the dotnet cli:
<pre><code class=language-bat>dotnet build MyProj.csproj -p:ExecuteAfterBuild=true
</code></pre><p>Or if you're using VS Code you can set it as a parameter in your tasks.json:
<pre><code class=language-json>{
    <span class=string>"version"</span>: <span class=string>"2.0.0"</span>,
    <span class=string>"tasks"</span>: [
        {
            <span class=string>"label"</span>: <span class=string>"generate"</span>,
            <span class=string>"group"</span>: <span class=string>"build"</span>,
            <span class=string>"command"</span>: <span class=string>"dotnet"</span>,
            <span class=string>"type"</span>: <span class=string>"process"</span>,
            <span class=string>"args"</span>: [
                <span class=string>"build"</span>,
                <span class=string>"${workspaceFolder}/MyProj.csproj"</span>,
                <span class=string>"-p:ExecuteAfterBuild=true"</span>
            ],
            <span class=string>"problemMatcher"</span>: <span class=string>"$msCompile"</span>
        }
    ]
}</code></pre><p>Then you can use the build shortcut <code>Ctrl + Shift + B</code> to build your project and execute it directly.</div></div></div><div class=clear></div></main><footer class="p-13 p-md-5 mt-5 text-center text-muted bg-light"><div class=container><ul class=links><li><a href=https://twitter.com/smack0007 class=twitter title=Twitter>Twitter</a><li><a href=https://github.com/smack0007 class=github title=Github>GitHub</a><li><a href=https://paypal.me/smack0007 class=coffee title="Buy Me a Coffee">Buy me a Coffee</a><li><a href=feed.rss class=rss title=RSS>RSS</a></ul><p class=mb-0>The Blog of Zachary Snow</div></footer></div><script>document.getElementById("navbar-toggler").onclick=function(){document.getElementById("navbarSupportedContent").classList.toggle("collapse")}</script>