<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1.0, maximum-scale=1"><meta name=description content=""><meta name=author content="Zachary Snow"><title>c#</title><base href=../ ><link href="https://fonts.googleapis.com/css?family=Open+Sans" rel=stylesheet><link rel=stylesheet type=text/css href=css/style.css><link rel=alternate type=application/rss+xml title="The Blog of Zachary Snow" href=feed.rss><div class=wrap><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><h1><a class=navbar-brand href=/ >The Blog of Zachary Snow</a></h1><button id=navbar-toggler class=navbar-toggler type=button aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation"><span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=index.html>Home</a><li class=nav-item><a class=nav-link href=about.html>About</a><li class=nav-item><a class=nav-link href=tags.html>Tags</a></ul><div class="social my-2 my-lg-0"><a href=https://twitter.com/smack0007 class=twitter title=Twitter><span class=icon-twitter></span></a> <a href=https://github.com/smack0007 class=github title=Github><span class=icon-github></span></a> <a href=https://paypal.me/smack0007 class=coffee title="Buy me a Coffee"><span class=icon-mug></span></a> <a href=feed.rss class=rss title=RSS><span class=icon-rss></span></a></div></div></nav><main class=container><div class=posts><div class=post><h2><a href=blog/2020/enum-extension-methods.html>Enum Extension Methods</a></h2><div class=meta><span class=date><span class=icon-calendar></span>July 17, 2020</span> <span class=category><span class=icon-folder></span>c#</span> <span class=tags><span class=icon-price-tags></span>c#, enum, extension</span></div><div class=content><p>Did you know you can create extension methods for enums?</p><a class=readMore href=blog/2020/enum-extension-methods.html>Read More</a></div></div><div class=post><h2><a href=blog/2020/disable-csharp-null-checks-for-a-field-or-property.html>Disable C# null checks for a field or property</a></h2><div class=meta><span class=date><span class=icon-calendar></span>January 02, 2020</span> <span class=category><span class=icon-folder></span>c#</span> <span class=tags><span class=icon-price-tags></span>c#, nrt, nullable</span></div><div class=content><p>The new nullable reference types in C# are great but sometimes you might need to disable it for a single field or property. You can do that by assigning the value to <code>null</code> and using the <code>!</code> operator.</p><a class=readMore href=blog/2020/disable-csharp-null-checks-for-a-field-or-property.html>Read More</a></div></div><div class=post><h2><a href=blog/2019/use-nameof-to-set-string-variable-to-its-name.html>Use nameof() to set a string variable to its name</a></h2><div class=meta><span class=date><span class=icon-calendar></span>December 17, 2019</span> <span class=category><span class=icon-folder></span>c#</span> <span class=tags><span class=icon-price-tags></span>c#, nameof()</span></div><div class=content><p>This is one of those things that should have just been obvious to me but once I saw it I wondered why I had never thought to use it myself. <code>nameof()</code> can be used when declaring a variable to set the value of the variable to the name of the variable:
<pre><code class=language-c#><div class=HtmlSyntaxHighlighterDotNet><span class=k>public</span> <span class=k>const</span> <span class=k>string</span> <span class=id>MyVariable1</span> <span class=t>=</span> <span class=k>nameof</span><span class=t>(</span><span class=id>MyVariable1</span><span class=t>)</span><span class=t>;</span>

<span class=k>public</span> <span class=k>static</span> <span class=k>void</span> <span class="id m">Main</span><span class=t>(</span><span class=t>)</span>
<span class=t>{</span>
    <span class=id>Console</span><span class=t>.</span><span class="id inv">WriteLine</span><span class=t>(</span><span class=id>MyVariable1</span><span class=t>)</span><span class=t>;</span>
<span class=t>}</span>
<span class=t></span></div></code></pre><a class=readMore href=blog/2019/use-nameof-to-set-string-variable-to-its-name.html>Read More</a></div></div><div class=post><h2><a href=blog/2019/dynamically-loaded-dll-thows-accessviolationexception-on-first-function-call.html>Dynamically loaded DLL thows AccessViolationException on first function call</a></h2><div class=meta><span class=date><span class=icon-calendar></span>October 22, 2019</span> <span class=category><span class=icon-folder></span>c#</span> <span class=tags><span class=icon-price-tags></span>c#, LoadLibrary, GetProcAddress</span></div><div class=content><p>In my library <a href=https://github.com/smack0007/GLESDotNet>GLESDotNet</a> I load the <code>libegl.dll</code> and <code>libglesv2.dll</code> DLLs dynamically via the Win32 functions <a href=https://docs.microsoft.com/en-us/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibraryw>LoadLibrary</a> and <a href=https://docs.microsoft.com/en-us/windows/win32/api/libloaderapi/nf-libloaderapi-getprocaddress>GetProcAddress</a>. I already had everything working via <code>DLLImport</code> but I wanted to be able to load the DLLs from different subdirectories depending on the architecture.<p>For the first test I only loaded the <code>libegl.dll</code> DLL before moving on to the <code>libglesv2.dll</code>. I made the classic programmer mistake of changing too much at one time. The first call to any function in <code>libegl.dll</code> resulted in an <code>AccessViolationException</code>. I couldn't figure out what was going wrong so I decided to revert my changes and try again.<p>I noticed that when the DLLs were in the same directory the <code>AccessViolationException</code> went away. Changing the working directory to the directory of the DLLs also solved the problem once the DLLs were placed in subdirectories again. This led me to believe that loading <code>libegl.dll</code> must be implicitly loading <code>libglesv2.dll</code>. Loading <code>libglesv2.dll</code> via <code>LoadLibrary</code> along with <code>libegl.dll</code> solved the problem.</div></div><div class=post><h2><a href=blog/2019/abusing-idisposable.html>Abusing IDisposable</a></h2><div class=meta><span class=date><span class=icon-calendar></span>August 27, 2019</span> <span class=category><span class=icon-folder></span>c#</span> <span class=tags><span class=icon-price-tags></span>c#, IDisposable</span></div><div class=content><p>In C# the interface <code>IDisposable</code> is usually used to indicate that an object needs to dispose of unmanaged resources. C# provides the <code>using</code> syntax to ensure that the <code>Dispose</code> method is called once the instance of the object is no longer needed.<p><code>Dispose</code> is just like any other method though and the <code>using</code> syntax can be used quite nicely for other use cases as well. Let's create a class we can use to collect some actions to be "deferred" until a later time.</p><a class=readMore href=blog/2019/abusing-idisposable.html>Read More</a></div></div><div class=post><h2><a href=blog/2019/generating-string-permutations-for-unit-testing.html>Generating string permutations for unit testing</a></h2><div class=meta><span class=date><span class=icon-calendar></span>February 11, 2019</span> <span class=category><span class=icon-folder></span>c#</span> <span class=tags><span class=icon-price-tags></span>c#, nunit, math</span></div><div class=content><p>I needed to parse a string containing 6 characters. Each character should only be one of 3 possibilities: '?' for null, '0' for false or '1' for true. The problem sounded easy enough to generate a whole bunch of unit tests for.</p><a class=readMore href=blog/2019/generating-string-permutations-for-unit-testing.html>Read More</a></div></div><div class=post><h2><a href=blog/2018/functional-card-deck-in-csharp.html>Functional Card Deck in C#</a></h2><div class=meta><span class=date><span class=icon-calendar></span>October 11, 2018</span> <span class=category><span class=icon-folder></span>c#</span> <span class=tags><span class=icon-price-tags></span>c#, fp</span></div><div class=content><p>I've been inspired lately by Mark Seemann's series of posts about <a href=http://blog.ploeh.dk/2018/10/01/applicative-functors/ >Applicative Functors</a>. One of the latest posts is an example about creating a <a href=http://blog.ploeh.dk/2018/10/08/full-deck/ >full deck</a> of cards. Most of posts up to this point have contained a C# example but for some reason this one didn't. This inspired me to take a shot at it.</p><a class=readMore href=blog/2018/functional-card-deck-in-csharp.html>Read More</a></div></div><div class=post><h2><a href=blog/2018/enabling-the-latest-version-of-csharp.html>Enabling the latest version of C#</a></h2><div class=meta><span class=date><span class=icon-calendar></span>June 21, 2018</span> <span class=category><span class=icon-folder></span>c#</span> <span class=tags><span class=icon-price-tags></span>c#, msbuild</span></div><div class=content><p>As of this writing when creating a new console project via <code>dotnet new console</code> the version of C# used in the project is version 7.0. This means you're missing out cool features like <a href=https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-7-1#default-literal-expressions>Default Literal Expressions</a>. The language version can be changed via Visual Studio though I prefer to enable it via MSBuild. This can be done in the <code>csproj</code> file or globally via a <code>Build.Directory.props</code> file. Changing the C# language version is done via a property known as <code>LangVersion</code>.
<pre><code class=language-xml><span class=xmlDelimiter>&lt;</span><span class=xmlName>PropertyGroup</span><span class=xmlDelimiter>></span>
    <span class=xmlDelimiter>&lt;</span><span class=xmlName>LangVersion</span><span class=xmlDelimiter>></span>latest<span class=xmlDelimiter>&lt;/</span><span class=xmlName>LangVersion</span><span class=xmlDelimiter>></span>
<span class=xmlDelimiter>&lt;/</span><span class=xmlName>PropertyGroup</span><span class=xmlDelimiter>></span></code></pre><p>This property can set to any of the values listed <a href=https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/compiler-options/langversion-compiler-option>here</a>. As of this writing VS Code doesn't seem to like it when you use 7.3 instead of latest. VS Code will show errors in your code although the code will compile without any problems.</div></div><div class=post><h2><a href=blog/2018/a-neat-way-to-curry-in-csharp.html>A neat way to curry in C#</a></h2><div class=meta><span class=date><span class=icon-calendar></span>May 25, 2018</span> <span class=category><span class=icon-folder></span>c#</span> <span class=tags><span class=icon-price-tags></span>c#, fp</span></div><div class=content><p>I was reading an older blogpost from <a href=http://mikehadlow.blogspot.de/2015/09/partial-application-in-c.html>Mike Hadlow</a> about <a href=http://mikehadlow.blogspot.de/2015/09/partial-application-in-c.html>Partial Application in C#</a> in which he discusses how <a href=https://en.wikipedia.org/wiki/Partial_application>Partial Application</a> can be implemented in C# via <a href=https://en.wikipedia.org/wiki/Currying>Currying</a>. Although I appreciate his example of implementing currying via extsion methods, the syntax is hideous. There is a suggestion in the comments though that I found to be a much better solution.
<pre><code class=language-c#><div class=HtmlSyntaxHighlighterDotNet><span class=co>// Define a local function Add.</span>
<span class=k>int</span> <span class="id m">Add</span><span class=t>(</span><span class=k>int</span> <span class=id>a</span><span class=t>,</span> <span class=k>int</span> <span class=id>b</span><span class=t>)</span> <span class=t>=></span> <span class=id>a</span> <span class=t>+</span> <span class=id>b</span><span class=t>;</span>

<span class=co>// Here we do the currying.</span>
<span class="id ty">Func</span><span class=t><</span><span class=k>int</span><span class=t>,</span> <span class=k>int</span><span class=t>></span> <span class=id>add3</span> <span class=t>=</span> <span class=t>(</span><span class=id>b</span><span class=t>)</span> <span class=t>=></span> <span class="id inv">Add</span><span class=t>(</span><span class=n>3</span><span class=t>,</span> <span class=id>b</span><span class=t>)</span><span class=t>;</span>

<span class=co>// This will print 5.</span>
<span class=id>Console</span><span class=t>.</span><span class=id>WriteLine</span><span class=t>(</span><span class=id>add3</span><span class=t></span><span class=id></span><span class=t></span><span class=t>(</span><span class=id></span><span class=t></span><span class=id></span><span class=t></span>2));

<span class=co>// Curry one more time so that we have</span>
<span class=co>// a function that simply produces 5.</span>
<span class="id ty">Func</span><span class=t><</span><span class=k>int</span><span class=t>></span> <span class=id>five</span> <span class=t>=</span> <span class=t>(</span><span class=t>)</span> <span class=t>=></span> <span class="id inv">add3</span><span class=t>(</span><span class=n>2</span><span class=t>)</span><span class=t>;</span>

<span class=co>// This will also print 5.</span>
<span class=id>Console</span><span class=t>.</span><span class=id>WriteLine</span><span class=t>(</span><span class=id>five</span><span class=t></span><span class=id></span><span class=t></span><span class=t>(</span><span class=id></span><span class=t></span><span class=id></span><span class=t>)</span>);
<span class=t></span></div></code></pre></div></div><div class=post><h2><a href=blog/2018/lambda-collection-wrappers.html>Lambda Collection Wrappers</a></h2><div class=meta><span class=date><span class=icon-calendar></span>April 26, 2018</span> <span class=category><span class=icon-folder></span>c#</span> <span class=tags><span class=icon-price-tags></span>c#, lambda, fp</span></div><div class=content><p>I've been reading a lot as of late about functional programming and I try to incorperate as much as possible into my everyday programming. One trick that I've definitely started using is wrapping collections in lambda functions.</p><a class=readMore href=blog/2018/lambda-collection-wrappers.html>Read More</a></div></div><div class=post><h2><a href=blog/2018/string-join-extension-method.html>string.Join Extension Method</a></h2><div class=meta><span class=date><span class=icon-calendar></span>April 19, 2018</span> <span class=category><span class=icon-folder></span>c#</span> <span class=tags><span class=icon-price-tags></span>c#, linq</span></div><div class=content><p>Normally if want to do a <code>string.Join</code> on the result of a Linq query you end up with somthing looking like this:
<pre><code class=language-csharp><div class=HtmlSyntaxHighlighterDotNet>Console.WriteLine(string.<span class=id>Join</span><span class=t>(</span>", "<span class="id ty"></span><span class=id></span><span class=t>,</span> <span class="id ty">numbers</span><span class=t>.</span><span class="id ty">Where</span><span class=id></span><span class=t></span><span class=t>(</span><span class="id ty">x</span> <span class=t></span><span class="id ty"></span><span class=t></span><span class=id></span>=> <span class=t></span><span class="id ty">x</span> <span class=id></span>% 2 == 0<span class=t>)</span><span class=t></span>));
<span class=t></span></div></code></pre><p>The call to <code>string.Join</code> has to come first and then the Linq query. I've always felt this breaks the flow of the code and would be easier to read if the <code>string.Join</code> was at the end of the Linq query:
<pre><code class=language-csharp><div class=HtmlSyntaxHighlighterDotNet>Console.WriteLine(numbers.Where(x => x % 2 == 0).<span class=id>JoinString</span><span class=t>(</span>", "<span class=t>)</span><span class=t></span>);
<span class=t></span></div></code></pre><p>This can be implemented with the following extension methods:
<pre><code class=language-csharp><div class=HtmlSyntaxHighlighterDotNet><span class=k>public</span> <span class=k>static</span> <span class=k>class</span> <span class="id ty">JoinStringExtensions</span>
<span class=t>{</span>
    <span class=k>public</span> <span class=k>static</span> <span class=k>string</span> <span class="id m">JoinString</span><span class=t><</span><span class="id m">T</span><span class=t>></span><span class=t>(</span><span class=k>this</span> <span class="id ty">IEnumerable</span><span class=t><</span><span class="id ty">T</span><span class=t>></span> <span class=id>source</span><span class=t>,</span> <span class=k>string</span> <span class=id>seperator</span><span class=t>)</span> <span class=t>=></span>
        <span class=k>string</span><span class=t>.</span><span class="id inv">Join</span><span class=t>(</span><span class=id>seperator</span><span class=t>,</span> <span class=id>source</span><span class=t>.</span><span class="id inv">Select</span><span class=t>(</span><span class=id>x</span> <span class=t>=></span> <span class=id>x</span><span class=t>.</span><span class="id inv">ToString</span><span class=t>(</span><span class=t>)</span><span class=t>)</span><span class=t>)</span><span class=t>;</span>

    <span class=k>public</span> <span class=k>static</span> <span class=k>string</span> <span class="id m">JoinString</span><span class=t>(</span><span class=k>this</span> <span class="id ty">IEnumerable</span><span class=t><</span><span class=k>string</span><span class=t>></span> <span class=id>source</span><span class=t>,</span> <span class=k>string</span> <span class=id>seperator</span><span class=t>)</span> <span class=t>=></span>
        <span class=k>string</span><span class=t>.</span><span class="id inv">Join</span><span class=t>(</span><span class=id>seperator</span><span class=t>,</span> <span class=id>source</span><span class=t>)</span><span class=t>;</span>
<span class=t>}</span>
<span class=t></span></div></code></pre><p>The specialization for <code>IEnumerable&lt;string></code> is just mirroring the implementation from <code>string.Join</code>.</div></div><div class=post><h2><a href=blog/2018/poor-mans-template-engine-3.html>Poor Man's Template Engine in C# Part 3</a></h2><h3>Include</h3><div class=meta><span class=date><span class=icon-calendar></span>March 22, 2018</span> <span class=category><span class=icon-folder></span>c#</span> <span class=tags><span class=icon-price-tags></span>c#, template, template-engine</span></div><div class=content><p>In our <a href=blog/2018/poor-mans-template-engine-2.html>last episode</a> we implemeted the first two helper funcitons <code>HtmlEncode</code> and <code>If</code>. Today we want to implement <code>Include</code>.</p><a class=readMore href=blog/2018/poor-mans-template-engine-3.html>Read More</a></div></div><div class=post><h2><a href=blog/2018/poor-mans-template-engine-2.html>Poor Man's Template Engine in C# Part 2</a></h2><h3>HtmlEncode and If</h3><div class=meta><span class=date><span class=icon-calendar></span>March 14, 2018</span> <span class=category><span class=icon-folder></span>c#</span> <span class=tags><span class=icon-price-tags></span>c#, template, template-engine</span></div><div class=content><p>In our <a href=blog/2018/poor-mans-template-engine-1.html>last episode</a> we laid the groundwork for our simple template engine. In this episode we'll introduce our first 2 helper functions.</p><a class=readMore href=blog/2018/poor-mans-template-engine-2.html>Read More</a></div></div><div class=post><h2><a href=blog/2018/poor-mans-template-engine-1.html>Poor Man's Template Engine in C# Part 1</a></h2><h3>Groundwork</h3><div class=meta><span class=date><span class=icon-calendar></span>March 06, 2018</span> <span class=category><span class=icon-folder></span>c#</span> <span class=tags><span class=icon-price-tags></span>c#, template, template-engine</span></div><div class=content><p>If you're looking for a poor man's solution to a templating engine for .net and don't really need the overhead a complete template engine brings with it, I've come up with the following solution.</p><a class=readMore href=blog/2018/poor-mans-template-engine-1.html>Read More</a></div></div><div class=post><h2><a href=blog/2018/snowball-2.html>Snowball V2.0</a></h2><div class=meta><span class=date><span class=icon-calendar></span>February 23, 2018</span> <span class=category><span class=icon-folder></span>Snowball</span> <span class=tags><span class=icon-price-tags></span>Snowball, c#</span></div><div class=content><p>I haven't written anything new here in a very long time and a lot has happened since then. I started a new job at <a href=https://www.beumergroup.com>BeumerGroup</a> this year and now work mostly in TypeScript writing an html5 spa app.<p>In my spare time I've decided to working on version 2.0 of my <a href=https://github.com/smack0007/Snowball>Snowball</a>, my 2D game framework. I've been playing around with the idea for a while now. This version will be developed directly for .net core and will be developed with cross platform capability in mind. The api will look similar but will have some changes.<p>The old repo is still available on my <a href=https://github.com/smack0007/ >github</a> at <a href=https://github.com/smack0007/Snowball_v1>https://github.com/smack0007/Snowball_v1</a>.</div></div><div class=post><h2><a href=blog/2013/using-component-glue-to-build-your-object-graphs-automatically.html>Using Component Glue to build your object graphs automatically</a></h2><div class=meta><span class=date><span class=icon-calendar></span>July 26, 2013</span> <span class=category><span class=icon-folder></span>.NET</span> <span class=tags><span class=icon-price-tags></span>Open Source, Dependency Injection, IoC, C#, .NET</span></div><div class=content><p>Component Glue is an IoC container and you use it of course to wire up your object graphs for you. Component Glue can also build your object graphs for you automatically if there are no interfaces involved. Take this example:</p><script src=https://gist.github.com/smack0007/6091538.js></script><p>In After.cs, you can see that Component Glue is able to build the entire object graph for us. This will include all future dependencies as well so long as interfaces don't come into play. Should an interface be needed, you can just bind that single component.<p>This is a very powerful thing. If one component needs to take on a dependency, just ask for it in the constructor and Component Glue will handle it for you.</div></div><div class=post><h2><a href=blog/2013/component-glue-v1-0.html>Component Glue v1.0</a></h2><div class=meta><span class=date><span class=icon-calendar></span>June 11, 2013</span> <span class=category><span class=icon-folder></span>.NET</span> <span class=tags><span class=icon-price-tags></span>.NET, C#, ComponentGlue, Dependency Injection, Github, IoC, NuGet</span></div><div class=content><p>I finally brought Component Glue up to a state where I felt like the product was finished. You can get it via NuGet:<div class=nuget-badge>`PM> Install-Package ComponentGlue`</div><p>or you can get the source from <a href=https://github.com/smack0007/ComponentGlue>GitHub</a>. The documentation is definitely sparse I know but I recommend taking a look at the unit tests to get a feel for what you can do with Component Glue.<p>Credit for the NuGet CSS <a href=http://www.arunrana.net/2012/01/design-of-nuget-package-installation.html>here</a>.</div></div><div class=post><h2><a href=blog/2013/gldotnet-version-0-6-0.html>GLDotNet Version 0.6.0</a></h2><div class=meta><span class=date><span class=icon-calendar></span>February 19, 2013</span> <span class=category><span class=icon-folder></span>.NET</span> <span class=tags><span class=icon-price-tags></span>C#, OpenGL, .NET</span></div><div class=content><p>I just released GLDotNet Version 0.6.0.<h2 id=changelog>Changelog:</h2><ul><li>**GLDotNet.Toolkit**: Assembly containing simple app framework.<li>**GLDotNet.Objects**: Assembly containing higher level objects such as Texture2D and VertexBuffer.<li>More overloads added to GLContext class.<li>byte and sbyte are now mapped correctly in generated code.<li>Fixed the naming of some functions so as not to include type notation, i.e. Color4u.<li>Decreased the number of enum values output.</ul></div></div><div class=post><h2><a href=blog/2013/introducing-gldotnet.html>Introducing GLDotNet</a></h2><div class=meta><span class=date><span class=icon-calendar></span>January 02, 2013</span> <span class=category><span class=icon-folder></span>.NET</span> <span class=tags><span class=icon-price-tags></span>C#, OpenGL, .NET, Open Source</span></div><div class=content><p>Today I released a project I've been playing around with for a year or so on Codeplex. It's called <a href=https://gldotnet.codeplex.com/ >GLDotNet</a>. From the project description:<p><em>C# wrapper for OpenGL. Partially generated from the OpenGL spec and partially written by hand, the aim is to have a flexible and native feeling C# binding.</em><p>I have generated functions from the OpenGL spec excluding 1 or 2 but unfortunately of the generated code is untested. There is a demo project included in the source code. The Github repository is located here: <a href=https://github.com/smack0007/GLDotNet>https://github.com/smack0007/GLDotNet</a></div></div><div class=post><h2><a href=blog/2012/getting-started-with-snowball.html>Getting Started with Snowball</a></h2><div class=meta><span class=date><span class=icon-calendar></span>March 04, 2012</span> <span class=category><span class=icon-folder></span>.NET</span> <span class=tags><span class=icon-price-tags></span>C#, .NET, Game Programming</span></div><div class=content><p>My game framework Snowball is far enough along that small games can be developed with it by now. The basic overall design is now laid out and not too much is likely to change as I'm now developing my own small games with it.<p>In order to create some kind of documentation on how to use Snowball, I created a Samples folder in the source. In the Samples folder is a WalkingWizard sample. I'm posting this source code here but it can also be viewed on GitHub <a href=https://github.com/smack0007/Snowball/blob/master/Samples/WalkingWizard/WalkingWizardSample.cs>here</a>.</p><script src="https://gist.github.com/2400440.js?file=WalkingWizardSample.cs"></script></div></div><div class=post><h2><a href=blog/2011/what-is-snowball-and-what-do-i-want-to-do-with-it.html>What is Snowball and what do I want to do with it?</a></h2><div class=meta><span class=date><span class=icon-calendar></span>October 16, 2011</span> <span class=category><span class=icon-folder></span>.NET</span> <span class=tags><span class=icon-price-tags></span>2d, C#, CodePlex, Open Source, SlimDX, Xna</span></div><div class=content><p>I originally got the idea for Snowball after working with the Xna Framework. The Xna Framework is a good piece of software for what it is but there are some things about which I just do not agree with:<ul><li>The content pipeline only works with content in the serialized .xnb format.<li>There are certain content types which can only be loaded via the content pipeline.<li>Certain features don't exist on the PC because they don't exist on the XBox or Windows Phone 7.</ul><p>Xna was designed as an abstraction layer for all the 3 platforms mentioned in the last point, so that one is somewhat understandable. I don't want to write games for my XBox right now though, so why should things like drawing lines not be available to me?<p>With these points in mind I started working on <a href=http://snowball.codeplex.com/ >Snowball</a>. It's designed to be an Xna like framework for making 2D games. It uses SlimDX on the backend, but that is completely abstracted away from consumers of the framework. What I want to do is design the API so that the backend can be swapped out <strong>somewhat</strong> painlessly.<p>I still have a ways to go before I will consider it a version 1.0 release. As of this writing, I'm transitioning to more of a ContentLoader class style for loading your game's content. Any resource type from within the framework can be loaded by hand if you want, the ContentLoader class will just make it easier. After that I have a few other features like GamePad and Music which I would like to implement before saying I have a Beta type release.<p>The future after that is up in the air. I would love to try and have different implementations of the API for Xna and/or OpenTK.<p>I recommend for anyone who is interested as to why an API designer choose to implement the API in the way they did to try it for themselves. I have learned many things from this project including why certain design decisions were made by the Xna Framework team.</div></div><div class=post><h2><a href=blog/2010/component-glue.html>Component Glue</a></h2><div class=meta><span class=date><span class=icon-calendar></span>November 02, 2010</span> <span class=category><span class=icon-folder></span>.NET</span> <span class=tags><span class=icon-price-tags></span>C#, CodePlex, IoC, Open Source</span></div><div class=content><p>The other day I started an open source project for an <a href=http://www.martinfowler.com/articles/injection.html>IoC Container</a> I call <a href=http://componentglue.codeplex.com/ >Component Glue</a>. It's in a toy / learning tool status right now and I don't know how far I actually want to take the project. More to come though.<p><a href=http://componentglue.codeplex.com/ >Component Glue on Codeplex</a></div></div><div class=post><h2><a href=blog/2010/implementing-basic-dependency-injection-using-services-container.html>Implementing basic Dependency Injection using a Service Container</a></h2><div class=meta><span class=date><span class=icon-calendar></span>June 21, 2010</span> <span class=category><span class=icon-folder></span>.NET</span> <span class=tags><span class=icon-price-tags></span>.NET, C#, Dependency Injection, Design Patterns, Service Continer</span></div><div class=content><p>By extending your Service Container class, a very basic version of dependency injection can be implemented. We'll implement two forms of dependency injection: constructor and property injection.</p><a class=readMore href=blog/2010/implementing-basic-dependency-injection-using-services-container.html>Read More</a></div></div><div class=post><h2><a href=blog/2010/progress-bars-in-windows-7-taskbars.html>Progress Bar in Windows 7 Taskbars</a></h2><div class=meta><span class=date><span class=icon-calendar></span>June 01, 2010</span> <span class=category><span class=icon-folder></span>.NET</span> <span class=tags><span class=icon-price-tags></span>.NET, C#, Windows 7</span></div><div class=content><p>I decided to add progress bar to the Windows 7 Taskbar in my Timer app.<p>I started by downloading and compiling the <a href=http://code.msdn.microsoft.com/WindowsAPICodePack>Windows API Code Pack</a> in Release mode. I then added a reference to the Microsoft.WindowsAPICodePack.dll and Microsoft.WindowsAPICodePack.Shell.dll files to the project. After that add the lines:
<pre><code class=language-c#><div class=HtmlSyntaxHighlighterDotNet><span class="k sta">using</span> <span class="id u">Microsoft</span><span class=t>.</span><span class="id u">WindowsAPICodePack</span><span class=t>.</span><span class="id u">Taskbar</span><span class=t>;</span>
<span class=t></span></div></code></pre><p>to your using statements. When the clock starts running I create the progress bar in the taskbar with:
<pre><code class=language-c#><div class=HtmlSyntaxHighlighterDotNet><span class=co>// Initialize progress bar</span>
if(TaskbarManager.IsPlatformSupported)
{
	TaskbarManager.Instance.SetProgressState(TaskbarProgressBarState.Normal);
	TaskbarManager.Instance.SetProgressValue(0, <span class=t>(</span><span class=k>int</span><span class=t></span><span class=id></span><span class=t>)</span><span class=k>this</span><span class=t></span>.<span class="id ty">totalTime</span><span class=t>.</span><span class="id ty">TotalSeconds</span><span class=id></span><span class=t>,</span> <span class=k>this</span><span class="id ty"></span><span class=id></span>.<span class=t></span><span class="id ty">Handle</span><span class=id></span><span class=t></span><span class=t></span>)<span class=id></span><span class=t>;</span>
<span class=t>}</span>
<span class=t></span></div></code></pre><p>to stop the progress bar:
<pre><code class=language-c#><div class=HtmlSyntaxHighlighterDotNet><span class=co>// Stop progress bar</span>
if<span class=t>(</span><span class=id>TaskbarManager</span><span class=t>.</span><span class=id>IsPlatformSupported</span><span class=t></span><span class=id></span><span class=t>)</span>
	<span class="id ty">TaskbarManager</span><span class=t>.</span><span class="id ty">Instance</span><span class=t>.</span><span class="id m">SetProgressState</span><span class=t>(</span><span class="id ty">TaskbarProgressBarState</span><span class=t>.</span><span class="id ty">NoProgress</span><span class=id></span><span class=t>)</span><span class=t>;</span>
<span class=t></span></div></code></pre><p>and finally to update the progress bar on each tick:
<pre><code class=language-c#><div class=HtmlSyntaxHighlighterDotNet><span class=co>// Update progress bar</span>
if<span class=t>(</span><span class=id>TaskbarManager</span><span class=t>.</span><span class=id>IsPlatformSupported</span><span class=t></span><span class=id></span><span class=t>)</span>
	<span class="id ty">TaskbarManager</span><span class=t>.</span><span class="id ty">Instance</span><span class=t>.</span><span class="id m">SetProgressValue</span><span class=t>(</span><span class=t>(</span><span class=k>int</span><span class=t></span><span class="id ty"></span><span class=t>)</span><span class=id></span><span class=t></span><span class=k>this</span><span class="id ty"></span><span class=id></span>.<span class=t></span><span class="id ty">totalTime</span><span class=t>.</span><span class="id ty">TotalSeconds</span> <span class=id></span>- <span class=t></span><span class=t>(</span><span class=k>int</span><span class=t></span><span class="id ty"></span><span class=t>)</span><span class=id></span><span class=t></span><span class=k>this</span><span class="id ty"></span><span class=id></span>.<span class=t></span><span class="id ty">time</span><span class=t>.</span><span class="id ty">TotalSeconds</span><span class=id></span><span class=t>,</span> <span class=t>(</span><span class=k>int</span><span class=t></span><span class="id ty"></span><span class=t>)</span><span class=id></span><span class=t></span><span class=k>this</span><span class="id ty"></span><span class=id></span>.<span class=t></span><span class="id ty">totalTime</span><span class=t>.</span><span class="id ty">TotalSeconds</span><span class=id></span><span class=t>,</span> <span class=k>this</span><span class="id ty"></span><span class=id></span>.<span class=t></span><span class="id ty">Handle</span><span class=id></span><span class=t>)</span><span class=t>;</span>
<span class=t></span></div></code></pre></div></div><div class=post><h2><a href=blog/2010/drawing-rectangles-with-spritebatch.html>Drawing Rectangles with SpriteBatch</a></h2><div class=meta><span class=date><span class=icon-calendar></span>March 29, 2010</span> <span class=category><span class=icon-folder></span>.NET</span> <span class=tags><span class=icon-price-tags></span>C#, Code Snippets, Xna</span></div><div class=content><p>Just a quick code snippet which adds an extension method for drawing Rectangles to SpriteBatch:
<pre><code class=language-c#><div class=HtmlSyntaxHighlighterDotNet><span class=k>public</span> <span class=k>static</span> <span class=k>class</span> <span class="id ty">SpriteBatchHelper</span>
<span class=t>{</span>
	<span class=k>static</span> <span class=id>Texture2D</span> <span class=id>pixel</span><span class=t>;</span>

	<span class=k>private</span> <span class=k>static</span> <span class=k>void</span> <span class="id m">LoadPixel</span><span class=t>(</span><span class="id ty">GraphicsDevice</span> <span class=id>graphicsDevice</span><span class=t>)</span>
	<span class=t>{</span>
		<span class="k sta">if</span><span class=t>(</span><span class=id>pixel</span> <span class=t>==</span> <span class=k>null</span><span class=t>)</span>
		<span class=t>{</span>
			<span class=id>pixel</span> <span class=t>=</span> <span class=k>new</span> <span class="id ty">Texture2D</span><span class=t>(</span><span class=id>graphicsDevice</span><span class=t>,</span> <span class=n>1</span><span class=t>,</span> <span class=n>1</span><span class=t>)</span><span class=t>;</span>
			<span class=id>pixel</span><span class=t>.</span><span class=id>SetData</span><span class=t>&</span><span class=id>lt</span><span class=t>;</span><span class=id>Color</span><span class=t>&</span><span class=id>gt</span><span class=t>;</span><span class=t>(</span><span class=k>new</span> <span class=id>Color</span><span class=t>[</span><span class=t></span><span class=t>]</span> <span class=t>{</span> <span class=id>Color</span><span class=t>.</span><span class=id>White</span> <span class=t>}</span><span class=t>)</span><span class=t>;</span>
		<span class=t>}</span>
	<span class=t>}</span>

	<span class=k>public</span> <span class=k>static</span> <span class=k>void</span> <span class="id m">DrawRectangle</span><span class=t>(</span><span class=k>this</span> <span class="id ty">SpriteBatch</span> <span class=id>spriteBatch</span><span class=t>,</span> <span class="id ty">Rectangle</span> <span class=id>rectangle</span><span class=t>,</span> <span class="id ty">Color</span> <span class=id>color</span><span class=t>)</span>
	<span class=t>{</span>
		<span class="id inv">LoadPixel</span><span class=t>(</span><span class=id>spriteBatch</span><span class=t>.</span><span class=id>GraphicsDevice</span><span class=t>)</span><span class=t>;</span>
		<span class=id>spriteBatch</span><span class=t>.</span><span class="id inv">Draw</span><span class=t>(</span><span class=id>pixel</span><span class=t>,</span> <span class=id>rectangle</span><span class=t>,</span> <span class=id>color</span><span class=t>)</span><span class=t>;</span>
	<span class=t>}</span>
<span class=t>}</span>
<span class=t></span></div></code></pre></div></div><div class=post><h2><a href=blog/2010/csharp-extension-methods-in-your-own-library.html>C# Extension Methods in your own Library</a></h2><div class=meta><span class=date><span class=icon-calendar></span>March 08, 2010</span> <span class=category><span class=icon-folder></span>.NET</span> <span class=tags><span class=icon-price-tags></span>C#, Extension Methods</span></div><div class=content><p>Normally I use extension methods in C# to extend a library that I did not write and therefore I have no control over. There are situations where it makes sense to use extension methods for a library that you yourself are writing.<p>For example, when you have interfaces in your library. You want to keep the number of methods in that interface as low as possible so that classes implementing the interface don't have to do a lot of heavy lifting. This means cutting out methods in an interface that are for the most part just syntactic sugar for another method in the interface.
<pre><code class=language-c#><div class=HtmlSyntaxHighlighterDotNet>
<span class=k>public</span> <span class=k>interface</span> <span class=id>IServiceContainer</span>
<span class=t>{</span>
    <span class=k>void</span> <span class="id m">AddService</span><span class=t>(</span><span class="id ty">Type</span> <span class=id>type</span><span class=t>,</span> <span class="id ty">Object</span> <span class=id>provider</span><span class=t>)</span><span class=t>;</span>
    <span class=k>object</span> <span class="id m">GetService</span><span class=t>(</span><span class="id ty">Type</span> <span class=id>type</span><span class=t>)</span><span class=t>;</span>
<span class=t>}</span>

<span class=k>public</span> <span class=k>static</span> <span class=k>class</span> <span class="id ty">IServiceContainerExtensions</span>
<span class=t>{</span>
    <span class=k>public</span> <span class=k>static</span> <span class=k>void</span> <span class=id>AddService</span>&<span class=t></span><span class="id ty">lt</span>;<span class="id ty">T</span>&<span class="id ty">gt</span>;<span class=t>(</span><span class="id ty"></span><span class=t></span><span class="id ty"></span><span class=t></span><span class=k>this</span> <span class=t></span><span class="id ty">IServiceContainer</span> <span class="id ty">services</span><span class=t>,</span> <span class=k>object</span> <span class="id ty">provider</span><span class=t></span><span class=t></span>)
<span class="id ty"></span>    <span class=t>{</span>
        <span class=id>services</span><span class=t>.</span><span class="id inv">AddService</span><span class=t>(</span><span class=k>typeof</span><span class=t>(</span><span class="id ty">T</span><span class=t>)</span><span class=t>,</span> <span class=id>provider</span><span class=t>)</span><span class=t>;</span>
    <span class=t>}</span>
<span class=t></span>
    <span class=k>public</span> <span class=k>static</span> <span class=id>T</span> <span class=id>GetService</span>&<span class=t></span><span class="id ty">lt</span>;<span class="id ty">T</span>&<span class="id ty">gt</span>;<span class=t>(</span><span class="id ty"></span><span class=t></span><span class="id ty"></span><span class=t></span><span class=k>this</span> <span class=t></span><span class="id ty">IServiceContainer</span> <span class="id ty">services</span><span class=t></span><span class=t></span>) <span class="id ty">where</span> <span class="id ty">T</span> : <span class=t></span><span class=k>class</span>
<span class="id ty"></span>    <span class=t>{</span>
<span class=t></span>        return <span class="id ty">services</span><span class=t>.</span><span class="id ty">GetService</span><span class=t>(</span><span class="id ty"></span><span class=t></span><span class="id ty"></span><span class=t></span>typeof<span class=t>(</span><span class="id ty">T</span><span class=t></span><span class="id ty"></span><span class=t>)</span>) as <span class="id ty">T</span>;
    <span class=t>}</span>

    <span class=k>public</span> <span class=k>static</span> <span class=id>T</span> <span class=id>GetRequiredService</span><span class=t></span>&<span class=id>lt</span>;<span class=id>T</span>&<span class=id>gt</span>;<span class=t>(</span><span class=id></span><span class=t></span><span class=id></span><span class=t></span><span class=k>this</span> <span class=t></span><span class="id ty">IServiceContainer</span> <span class=id>services</span><span class=t></span><span class=t></span>) <span class=id>where</span> <span class=id>T</span> : <span class=t></span><span class=k>class</span>
<span class="id ty"></span>    <span class=t>{</span>
<span class=t></span>        <span class=id>T</span> <span class=id>service</span> <span class=t>=</span> <span class=id>services</span><span class=t>.</span><span class="id inv">GetService</span><span class=t>(</span><span class=k>typeof</span><span class=t>(</span><span class="id ty">T</span><span class=t>)</span><span class=t>)</span> <span class=k>as</span> <span class=id>T</span><span class=t>;</span>

        if<span class=t>(</span><span class=id>service</span> <span class=t></span><span class=id></span><span class=t></span>== null)
            throw <span class=k>new</span> <span class=id>ServiceNotFoundException</span><span class=t>(</span>typeof<span class=t>(</span><span class="id ty">T</span><span class=t></span><span class="id ty"></span><span class=t>)</span><span class=id></span><span class=t>)</span><span class=t>;</span>

        return <span class=id>service</span>;
    }
}

<span class=t></span></div></code></pre><p>All of the methods in IServiceContainerExtensions are just helper methods for method in IServiceContainer. By making them extension methods in our own library though, we've made the barrier to entry lower. Other people can implement the interface and in a sense "inherit" the helper methods as well.</div></div></div><div class=clear></div></main><footer class="p-13 p-md-5 mt-5 text-center text-muted bg-light"><div class=container><ul class=links><li><a href=https://twitter.com/smack0007 class=twitter title=Twitter>Twitter</a><li><a href=https://github.com/smack0007 class=github title=Github>GitHub</a><li><a href=https://paypal.me/smack0007 class=coffee title="Buy me a Coffee">Buy me a Coffee</a><li><a href=feed.rss class=rss title=RSS>RSS</a></ul><p class=mb-0>The Blog of Zachary Snow</div></footer></div><script>document.getElementById("navbar-toggler").onclick=function(){document.getElementById("navbarSupportedContent").classList.toggle("collapse")}</script>