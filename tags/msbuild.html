<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1.0, maximum-scale=1"><meta name=description content=""><meta name=author content="Zachary Snow"><title>msbuild</title><base href=../ ><link href="https://fonts.googleapis.com/css?family=Open+Sans" rel=stylesheet><link rel=stylesheet type=text/css href=css/style.css><link rel=alternate type=application/rss+xml title="The Blog of Zachary Snow" href=feed.rss><div class=wrap><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><h1><a class=navbar-brand href=/ >The Blog of Zachary Snow</a></h1><button id=navbar-toggler class=navbar-toggler type=button aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation"><span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=index.html>Home</a><li class=nav-item><a class=nav-link href=about.html>About</a><li class=nav-item><a class=nav-link href=tags.html>Tags</a></ul><div class="social my-2 my-lg-0"><a href=https://twitter.com/smack0007 class=twitter title=Twitter><span class=icon-twitter></span></a> <a href=https://github.com/smack0007 class=github title=Github><span class=icon-github></span></a> <a href=https://paypal.me/smack0007 class=coffee title="Buy me a Coffee"><span class=icon-mug></span></a> <a href=feed.rss class=rss title=RSS><span class=icon-rss></span></a></div></div></nav><main class=container><div class=posts><div class=post><h2><a href=blog/2018/enabling-the-latest-version-of-csharp.html>Enabling the latest version of C#</a></h2><div class=meta><span class=date><span class=icon-calendar></span>June 21, 2018</span> <span class=tags><span class=icon-price-tags></span>c#, msbuild</span></div><div class=content><p>As of this writing when creating a new console project via <code>dotnet new console</code> the version of C# used in the project is version 7.0. This means you're missing out cool features like <a href=https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-7-1#default-literal-expressions>Default Literal Expressions</a>. The language version can be changed via Visual Studio though I prefer to enable it via MSBuild. This can be done in the <code>csproj</code> file or globally via a <code>Build.Directory.props</code> file. Changing the C# language version is done via a property known as <code>LangVersion</code>.
<pre><code class="hljs xml"><span class=hljs-tag>&lt;<span class=hljs-name>PropertyGroup</span>></span>
    <span class=hljs-tag>&lt;<span class=hljs-name>LangVersion</span>></span>latest<span class=hljs-tag>&lt;/<span class=hljs-name>LangVersion</span>></span>
<span class=hljs-tag>&lt;/<span class=hljs-name>PropertyGroup</span>></span></code></pre><p>This property can set to any of the values listed <a href=https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/compiler-options/langversion-compiler-option>here</a>. As of this writing VS Code doesn't seem to like it when you use 7.3 instead of latest. VS Code will show errors in your code although the code will compile without any problems.</div></div><div class=post><h2><a href=blog/2018/run-program-directly-after-building-vscode.html>Run a program directly after building in VS Code</a></h2><div class=meta><span class=date><span class=icon-calendar></span>April 11, 2018</span> <span class=tags><span class=icon-price-tags></span>.net, .netcore, msbuild, vscode</span></div><div class=content><p>Whenever I have a program that is just a generator of some kind I like to have that program execute directly after having built the program successfully. I'm going to show how to run the program via the dotnet cli but this trick can easily be applied to regular .NET programs or any program which is built using MSBuild.</p><a class=readMore href=blog/2018/run-program-directly-after-building-vscode.html>Read More</a></div></div><div class=post><h2><a href=blog/2018/merging-build-directory-props.html>Merging Build.Directory.props</a></h2><div class=meta><span class=date><span class=icon-calendar></span>April 04, 2018</span> <span class=tags><span class=icon-price-tags></span>msbuild, .net</span></div><div class=content><p>MSBuild version 15 introduced the concept of "Directory.Build.props" files. From the docs:<ul><li><code>Directory.Build.props</code> is a user-defined file that provides customizations to projects under a directory. This file is automatically imported from Microsoft.Common.props unless the property <code>ImportDirectoryBuildTargets</code> is set to false.</ul><p>What is not stated here is that only one <code>Directory.Build.props</code> will be imported automatically. Imagine your project exists in the directory <code>C:\repo\src\foo\foo.csproj</code> and there exists a file in both <code>C:\repo\src\Directory.Build.props</code> and <code>C:\repo\Directory.Build.props</code> then only <code>C:\repo\src\Directory.Build.props</code> will be automatically included when building <code>C:\repo\src\foo\foo.csproj</code>. If you would like <code>C:\repo\Directory.Build.props</code> to be included as well, then <code>C:\repo\src\Directory.Build.props</code> will have to include <code>C:\repo\Directory.Build.props</code> like so:
<pre><code class="hljs xml"><span class=hljs-tag>&lt;<span class=hljs-name>Project</span>></span>
    <span class=hljs-tag>&lt;<span class=hljs-name>Import</span> <span class=hljs-attr>Project</span>=<span class=hljs-string>"$([MSBuild]::GetPathOfFileAbove('Directory.Build.props', '$(MSBuildThisFileDirectory)../'))"</span> /></span>
<span class=hljs-tag>&lt;/<span class=hljs-name>Project</span>></span></code></pre><p>This is documented <a href=https://docs.microsoft.com/en-us/visualstudio/msbuild/customize-your-build#use-case-multi-level-merging>here</a>.</div></div><div class=post><h2><a href=blog/2010/visual-studio-move-referenced-dll-to-different-directory-after-build.html>Visual Studio: Move referenced DLL to different directory after Build</a></h2><div class=meta><span class=date><span class=icon-calendar></span>July 20, 2010</span> <span class=tags><span class=icon-price-tags></span>MSBuild</span></div><div class=content><p>If you need to move a referenced DLL to a different directory after build, add these commands to the "<strong>Post Build event command line</strong>" box in the "<strong>Build Events</strong>" tab of the project properties:
<pre><code>mkdir $(TargetDir)dir
move $(TargetDir)myDLL.dll $(TargetDir)dir\myDLL.dll
</code></pre></div></div><div class=post><h2><a href=blog/2010/changing-the-platformtarge-in-visual-c-express.html>Changing the PlatformTarget in Visual C# Express</a></h2><div class=meta><span class=date><span class=icon-calendar></span>January 18, 2010</span> <span class=tags><span class=icon-price-tags></span>MSBuild</span></div><div class=content><p>Some project types in Visual C# Express (Empty Project) will not allow you to change the PlatformTarget from the UI. You can still change the target platform though by editing the .csproj file in a text editor. Close the project and open it up in your favorite text editor (I use <a href=http://notepad-plus.sourceforge.net/ >Notpad++</a>). The .csproj file is really just a XML file. You should see somewhere in the file something like:
<pre><code class="hljs xml"><span class=hljs-tag>&lt;<span class=hljs-name>PropertyGroup</span> <span class=hljs-attr>Condition</span>=<span class=hljs-string>" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' "</span>></span>
		....
	<span class=hljs-tag>&lt;/<span class=hljs-name>PropertyGroup</span>></span>
	<span class=hljs-tag>&lt;<span class=hljs-name>PropertyGroup</span> <span class=hljs-attr>Condition</span>=<span class=hljs-string>" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' "</span>></span>
		....
	<span class=hljs-tag>&lt;/<span class=hljs-name>PropertyGroup</span>></span></code></pre><p>Inside the PropertyGroup elements, add the PlatformTarget element:
<pre><code class="hljs xml"><span class=hljs-tag>&lt;<span class=hljs-name>PropertyGroup</span> <span class=hljs-attr>Condition</span>=<span class=hljs-string>" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' "</span>></span>
		....
		<span class=hljs-tag>&lt;<span class=hljs-name>PlatformTarget</span>></span>x86<span class=hljs-tag>&lt;/<span class=hljs-name>PlatformTarget</span>></span>
	<span class=hljs-tag>&lt;/<span class=hljs-name>PropertyGroup</span>></span>
	<span class=hljs-tag>&lt;<span class=hljs-name>PropertyGroup</span> <span class=hljs-attr>Condition</span>=<span class=hljs-string>" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' "</span>></span>
		....
		<span class=hljs-tag>&lt;<span class=hljs-name>PlatformTarget</span>></span>x86<span class=hljs-tag>&lt;/<span class=hljs-name>PlatformTarget</span>></span>
	<span class=hljs-tag>&lt;/<span class=hljs-name>PropertyGroup</span>></span></code></pre><p>Save the file and open your project back up. Your project's output should now target only x86.</div></div></div><div class=clear></div></main><footer class="p-13 p-md-5 mt-5 text-center text-muted bg-light"><div class=container><ul class=links><li><a href=https://twitter.com/smack0007 class=twitter title=Twitter>Twitter</a><li><a href=https://github.com/smack0007 class=github title=Github>GitHub</a><li><a href=https://paypal.me/smack0007 class=coffee title="Buy me a Coffee">Buy me a Coffee</a><li><a href=feed.rss class=rss title=RSS>RSS</a></ul><p class=mb-0>The Blog of Zachary Snow</div></footer></div><script>document.getElementById("navbar-toggler").onclick=function(){document.getElementById("navbarSupportedContent").classList.toggle("collapse")}</script>