<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1.0, maximum-scale=1"><meta name=description content=""><meta name=author content="Zachary Snow"><title>.net</title><base href=../ ><link href="https://fonts.googleapis.com/css?family=Open+Sans" rel=stylesheet><link rel=stylesheet type=text/css href=css/style.css><link rel=alternate type=application/rss+xml title="The Blog of Zachary Snow" href=feed.rss><div class=wrap><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><h1><a class=navbar-brand href=/ >The Blog of Zachary Snow</a></h1><button id=navbar-toggler class=navbar-toggler type=button aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation"><span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=index.html>Home</a><li class=nav-item><a class=nav-link href=about.html>About</a><li class=nav-item><a class=nav-link href=tags.html>Tags</a></ul><div class="social my-2 my-lg-0"><a href=https://twitter.com/smack0007 class=twitter title=Twitter><span class=icon-twitter></span></a> <a href=https://github.com/smack0007 class=github title=Github><span class=icon-github></span></a> <a href=https://paypal.me/smack0007 class=coffee title="Buy me a Coffee"><span class=icon-mug></span></a> <a href=feed.rss class=rss title=RSS><span class=icon-rss></span></a></div></div></nav><main class=container><div class=posts><div class=post><h2><a href=blog/2018/run-program-directly-after-building-vscode.html>Run a program directly after building in VS Code</a></h2><div class=meta><span class=date><span class=icon-calendar></span>April 11, 2018</span> <span class=tags><span class=icon-price-tags></span>.net, .netcore, msbuild, vscode</span></div><div class=content><p>Whenever I have a program that is just a generator of some kind I like to have that program execute directly after having built the program successfully. I'm going to show how to run the program via the dotnet cli but this trick can easily be applied to regular .NET programs or any program which is built using MSBuild.</p><a class=readMore href=blog/2018/run-program-directly-after-building-vscode.html>Read More</a></div></div><div class=post><h2><a href=blog/2018/merging-build-directory-props.html>Merging Build.Directory.props</a></h2><div class=meta><span class=date><span class=icon-calendar></span>April 04, 2018</span> <span class=tags><span class=icon-price-tags></span>msbuild, .net</span></div><div class=content><p>MSBuild version 15 introduced the concept of "Directory.Build.props" files. From the docs:<ul><li><code>Directory.Build.props</code> is a user-defined file that provides customizations to projects under a directory. This file is automatically imported from Microsoft.Common.props unless the property <code>ImportDirectoryBuildTargets</code> is set to false.</ul><p>What is not stated here is that only one <code>Directory.Build.props</code> will be imported automatically. Imagine your project exists in the directory <code>C:\repo\src\foo\foo.csproj</code> and there exists a file in both <code>C:\repo\src\Directory.Build.props</code> and <code>C:\repo\Directory.Build.props</code> then only <code>C:\repo\src\Directory.Build.props</code> will be automatically included when building <code>C:\repo\src\foo\foo.csproj</code>. If you would like <code>C:\repo\Directory.Build.props</code> to be included as well, then <code>C:\repo\src\Directory.Build.props</code> will have to include <code>C:\repo\Directory.Build.props</code> like so:
<pre><code class=language-xml><span class=xmlDelimiter>&lt;</span><span class=xmlName>Project</span><span class=xmlDelimiter>></span>
    <span class=xmlDelimiter>&lt;</span><span class=xmlName>Import</span> <span class=xmlAttribute>Project</span><span class=xmlDelimiter>=</span><span class=xmlAttributeQuotes>"</span><span class=xmlAttributeValue>$([MSBuild]::GetPathOfFileAbove('Directory.Build.props', '$(MSBuildThisFileDirectory)../'))</span><span class=xmlAttributeQuotes>"</span> <span class=xmlDelimiter>/></span>
<span class=xmlDelimiter>&lt;/</span><span class=xmlName>Project</span><span class=xmlDelimiter>></span></code></pre><p>This is documented <a href=https://docs.microsoft.com/en-us/visualstudio/msbuild/customize-your-build#use-case-multi-level-merging>here</a>.</div></div><div class=post><h2><a href=blog/2013/using-component-glue-to-build-your-object-graphs-automatically.html>Using Component Glue to build your object graphs automatically</a></h2><div class=meta><span class=date><span class=icon-calendar></span>July 26, 2013</span> <span class=tags><span class=icon-price-tags></span>Open Source, Dependency Injection, IoC, C#, .NET</span></div><div class=content><p>Component Glue is an IoC container and you use it of course to wire up your object graphs for you. Component Glue can also build your object graphs for you automatically if there are no interfaces involved. Take this example:</p><script src=https://gist.github.com/smack0007/6091538.js></script><p>In After.cs, you can see that Component Glue is able to build the entire object graph for us. This will include all future dependencies as well so long as interfaces don't come into play. Should an interface be needed, you can just bind that single component.<p>This is a very powerful thing. If one component needs to take on a dependency, just ask for it in the constructor and Component Glue will handle it for you.</div></div><div class=post><h2><a href=blog/2013/component-glue-v1-0.html>Component Glue v1.0</a></h2><div class=meta><span class=date><span class=icon-calendar></span>June 11, 2013</span> <span class=tags><span class=icon-price-tags></span>.NET, C#, ComponentGlue, Dependency Injection, Github, IoC, NuGet</span></div><div class=content><p>I finally brought Component Glue up to a state where I felt like the product was finished. You can get it via NuGet:<div class=nuget-badge>`PM> Install-Package ComponentGlue`</div><p>or you can get the source from <a href=https://github.com/smack0007/ComponentGlue>GitHub</a>. The documentation is definitely sparse I know but I recommend taking a look at the unit tests to get a feel for what you can do with Component Glue.<p>Credit for the NuGet CSS <a href=http://www.arunrana.net/2012/01/design-of-nuget-package-installation.html>here</a>.</div></div><div class=post><h2><a href=blog/2013/gldotnet-version-0-6-0.html>GLDotNet Version 0.6.0</a></h2><div class=meta><span class=date><span class=icon-calendar></span>February 19, 2013</span> <span class=tags><span class=icon-price-tags></span>C#, OpenGL, .NET</span></div><div class=content><p>I just released GLDotNet Version 0.6.0.<h2 id=changelog>Changelog:</h2><ul><li>**GLDotNet.Toolkit**: Assembly containing simple app framework.<li>**GLDotNet.Objects**: Assembly containing higher level objects such as Texture2D and VertexBuffer.<li>More overloads added to GLContext class.<li>byte and sbyte are now mapped correctly in generated code.<li>Fixed the naming of some functions so as not to include type notation, i.e. Color4u.<li>Decreased the number of enum values output.</ul></div></div><div class=post><h2><a href=blog/2013/introducing-gldotnet.html>Introducing GLDotNet</a></h2><div class=meta><span class=date><span class=icon-calendar></span>January 02, 2013</span> <span class=tags><span class=icon-price-tags></span>C#, OpenGL, .NET, Open Source</span></div><div class=content><p>Today I released a project I've been playing around with for a year or so on Codeplex. It's called <a href=https://gldotnet.codeplex.com/ >GLDotNet</a>. From the project description:<p><em>C# wrapper for OpenGL. Partially generated from the OpenGL spec and partially written by hand, the aim is to have a flexible and native feeling C# binding.</em><p>I have generated functions from the OpenGL spec excluding 1 or 2 but unfortunately of the generated code is untested. There is a demo project included in the source code. The Github repository is located here: <a href=https://github.com/smack0007/GLDotNet>https://github.com/smack0007/GLDotNet</a></div></div><div class=post><h2><a href=blog/2012/getting-started-with-snowball.html>Getting Started with Snowball</a></h2><div class=meta><span class=date><span class=icon-calendar></span>March 04, 2012</span> <span class=tags><span class=icon-price-tags></span>C#, .NET, Game Programming</span></div><div class=content><p>My game framework Snowball is far enough along that small games can be developed with it by now. The basic overall design is now laid out and not too much is likely to change as I'm now developing my own small games with it.<p>In order to create some kind of documentation on how to use Snowball, I created a Samples folder in the source. In the Samples folder is a WalkingWizard sample. I'm posting this source code here but it can also be viewed on GitHub <a href=https://github.com/smack0007/Snowball/blob/master/Samples/WalkingWizard/WalkingWizardSample.cs>here</a>.</p><script src="https://gist.github.com/2400440.js?file=WalkingWizardSample.cs"></script></div></div><div class=post><h2><a href=blog/2011/winquakecon.html>WinQuakeCon</a></h2><div class=meta><span class=date><span class=icon-calendar></span>December 20, 2011</span> <span class=tags><span class=icon-price-tags></span>.NET, Command Shell, Console, Github, Quake, Terminal, Windows, WinQuakeCon</span></div><div class=content><p>I've always wanted a program that would allow me have a command line that I could slide in and out of view as needed like the console from <a href=http://en.wikipedia.org/wiki/Quake_(video_game)>Quake</a>. I never could find one and so I finally got decided to write a tool myself. A picture is below and the source code is on <a href=https://github.com/smack0007/WinQuakeCon>GitHub</a>.<p>I'm not putting a download here as I don't consider this finished just yet.</div></div><div class=post><h2><a href=blog/2010/implementing-basic-dependency-injection-using-services-container.html>Implementing basic Dependency Injection using a Service Container</a></h2><div class=meta><span class=date><span class=icon-calendar></span>June 21, 2010</span> <span class=tags><span class=icon-price-tags></span>.NET, C#, Dependency Injection, Design Patterns, Service Continer</span></div><div class=content><p>By extending your Service Container class, a very basic version of dependency injection can be implemented. We'll implement two forms of dependency injection: constructor and property injection.</p><a class=readMore href=blog/2010/implementing-basic-dependency-injection-using-services-container.html>Read More</a></div></div><div class=post><h2><a href=blog/2010/500-downloads-of-the-same-game.html>500 Downloads of the Same Game</a></h2><div class=meta><span class=date><span class=icon-calendar></span>June 09, 2010</span> <span class=tags><span class=icon-price-tags></span>.NET, CodePlex, Same Game Xna, WinForms, Xna</span></div><div class=content><p>My little Xna game that I wrote nearly 2 years ago reached the 500 downloads mark (binaries and source) the other day. With that said, I'd like to say that I'm working on version 2.0.<p>In version 2.0 I'm going to make the code more event driven. The old code uses the Xna Game class and in the new version I'll be making it WinForms based. Almost a complete rewrite.<p>My work so far is available through SVN on the project's <a href=http://samegamexna.codeplex.com/ >Codeplex page</a>.</div></div><div class=post><h2><a href=blog/2010/progress-bars-in-windows-7-taskbars.html>Progress Bar in Windows 7 Taskbars</a></h2><div class=meta><span class=date><span class=icon-calendar></span>June 01, 2010</span> <span class=tags><span class=icon-price-tags></span>.NET, C#, Windows 7</span></div><div class=content><p>I decided to add progress bar to the Windows 7 Taskbar in my Timer app.<p>I started by downloading and compiling the <a href=http://code.msdn.microsoft.com/WindowsAPICodePack>Windows API Code Pack</a> in Release mode. I then added a reference to the Microsoft.WindowsAPICodePack.dll and Microsoft.WindowsAPICodePack.Shell.dll files to the project. After that add the lines:
<pre><code class=language-c#><div class=HtmlSyntaxHighlighterDotNet><span class="k sta">using</span> <span class="id u">Microsoft</span><span class=t>.</span><span class="id u">WindowsAPICodePack</span><span class=t>.</span><span class="id u">Taskbar</span><span class=t>;</span>
<span class=t></span></div></code></pre><p>to your using statements. When the clock starts running I create the progress bar in the taskbar with:
<pre><code class=language-c#><div class=HtmlSyntaxHighlighterDotNet><span class=co>// Initialize progress bar</span>
if(TaskbarManager.IsPlatformSupported)
{
	TaskbarManager.Instance.SetProgressState(TaskbarProgressBarState.Normal);
	TaskbarManager.Instance.SetProgressValue(0, <span class=t>(</span><span class=k>int</span><span class=t></span><span class=id></span><span class=t>)</span><span class=k>this</span><span class=t></span>.<span class="id ty">totalTime</span><span class=t>.</span><span class="id ty">TotalSeconds</span><span class=id></span><span class=t>,</span> <span class=k>this</span><span class="id ty"></span><span class=id></span>.<span class=t></span><span class="id ty">Handle</span><span class=id></span><span class=t></span><span class=t></span>)<span class=id></span><span class=t>;</span>
<span class=t>}</span>
<span class=t></span></div></code></pre><p>to stop the progress bar:
<pre><code class=language-c#><div class=HtmlSyntaxHighlighterDotNet><span class=co>// Stop progress bar</span>
if<span class=t>(</span><span class=id>TaskbarManager</span><span class=t>.</span><span class=id>IsPlatformSupported</span><span class=t></span><span class=id></span><span class=t>)</span>
	<span class="id ty">TaskbarManager</span><span class=t>.</span><span class="id ty">Instance</span><span class=t>.</span><span class="id m">SetProgressState</span><span class=t>(</span><span class="id ty">TaskbarProgressBarState</span><span class=t>.</span><span class="id ty">NoProgress</span><span class=id></span><span class=t>)</span><span class=t>;</span>
<span class=t></span></div></code></pre><p>and finally to update the progress bar on each tick:
<pre><code class=language-c#><div class=HtmlSyntaxHighlighterDotNet><span class=co>// Update progress bar</span>
if<span class=t>(</span><span class=id>TaskbarManager</span><span class=t>.</span><span class=id>IsPlatformSupported</span><span class=t></span><span class=id></span><span class=t>)</span>
	<span class="id ty">TaskbarManager</span><span class=t>.</span><span class="id ty">Instance</span><span class=t>.</span><span class="id m">SetProgressValue</span><span class=t>(</span><span class=t>(</span><span class=k>int</span><span class=t></span><span class="id ty"></span><span class=t>)</span><span class=id></span><span class=t></span><span class=k>this</span><span class="id ty"></span><span class=id></span>.<span class=t></span><span class="id ty">totalTime</span><span class=t>.</span><span class="id ty">TotalSeconds</span> <span class=id></span>- <span class=t></span><span class=t>(</span><span class=k>int</span><span class=t></span><span class="id ty"></span><span class=t>)</span><span class=id></span><span class=t></span><span class=k>this</span><span class="id ty"></span><span class=id></span>.<span class=t></span><span class="id ty">time</span><span class=t>.</span><span class="id ty">TotalSeconds</span><span class=id></span><span class=t>,</span> <span class=t>(</span><span class=k>int</span><span class=t></span><span class="id ty"></span><span class=t>)</span><span class=id></span><span class=t></span><span class=k>this</span><span class="id ty"></span><span class=id></span>.<span class=t></span><span class="id ty">totalTime</span><span class=t>.</span><span class="id ty">TotalSeconds</span><span class=id></span><span class=t>,</span> <span class=k>this</span><span class="id ty"></span><span class=id></span>.<span class=t></span><span class="id ty">Handle</span><span class=id></span><span class=t>)</span><span class=t>;</span>
<span class=t></span></div></code></pre></div></div><div class=post><h2><a href=blog/2009/calculating-an-angle-from-a-vector2.html>Calculating an angle from a Vector2</a></h2><div class=meta><span class=date><span class=icon-calendar></span>February 28, 2009</span> <span class=tags><span class=icon-price-tags></span>.net, vectors, xna</span></div><div class=content><p>When you need to calculate an angle from a Vector2 structure, you can use this piece of code:
<pre><code class=language-c#><div class=HtmlSyntaxHighlighterDotNet><span class=k>public</span> <span class=k>static</span> <span class=k>class</span> <span class="id ty">Vector2Helper</span>
<span class=t>{</span>
	<span class=k>public</span> <span class=k>static</span> <span class=k>float</span> <span class="id m">CalculateAngle</span><span class=t>(</span><span class="id ty">Vector2</span> <span class=id>v</span><span class=t>)</span>
	<span class=t>{</span>
		<span class=k>float</span> <span class=id>angle</span> <span class=t>=</span> <span class=n>0.0f</span><span class=t>;</span>

		<span class="k sta">if</span><span class=t>(</span><span class=id>v</span> <span class=t>!=</span> <span class=id>Vector2</span><span class=t>.</span><span class=id>Zero</span><span class=t>)</span>
		<span class=t>{</span>
			<span class=id>v</span><span class=t>.</span><span class="id inv">Normalize</span><span class=t>(</span><span class=t>)</span><span class=t>;</span>

			<span class=id>angle</span> <span class=t>=</span> <span class=t>(</span><span class=k>float</span><span class=t>)</span><span class=id>Math</span><span class=t>.</span><span class="id inv">Acos</span><span class=t>(</span><span class=id>v</span><span class=t>.</span><span class=id>Y</span><span class=t>)</span><span class=t>;</span>

			<span class="k sta">if</span><span class=t>(</span><span class=id>v</span><span class=t>.</span><span class=id>X</span> <span class=t>&</span><span class=id>lt</span><span class=t></span><span class=t>;</span> <span class=n>0.0f</span><span class=t></span>)
			<span class=id>angle</span> <span class=t>=</span> <span class=t>-</span><span class=id>angle</span><span class=t>;</span>
		<span class=t>}</span>

		<span class="k sta">return</span> <span class=id>angle</span><span class=t>;</span>
	<span class=t>}</span>
<span class=t>}</span>
<span class=t></span></div></code></pre><p>I used this to calculate an angle from the Vector2 of the Left Stick.<p>The original credit for this source code comes from <a href=http://xnagamer.spaces.live.com/blog/cns!EC20BAAE6808B682!139.entry>here</a>.</div></div><div class=post><h2><a href=blog/2009/drawing-2d-lines-as-rotated-quads.html>Drawing 2D Lines as Rotated Quads</a></h2><div class=meta><span class=date><span class=icon-calendar></span>February 07, 2009</span> <span class=tags><span class=icon-price-tags></span>.NET</span></div><div class=content><p>I haven't had much time lately with work but one question I've seen asked many many times is how to draw lines of different widths. So, to cut to the chase I'll share the code I've used to do it.
<pre><code class=language-c#><div class=HtmlSyntaxHighlighterDotNet><span class=k>public</span> <span class=k>void</span> <span class="id m">DrawLine</span><span class=t>(</span><span class="id ty">Vector3</span> <span class=id>p1</span><span class=t>,</span> <span class="id ty">Color</span> <span class=id>c1</span><span class=t>,</span> <span class="id ty">Vector3</span> <span class=id>p2</span><span class=t>,</span> <span class="id ty">Color</span> <span class=id>c2</span><span class=t>,</span> <span class=k>int</span> <span class=id>width</span><span class=t>)</span>
<span class=t>{</span>
	<span class=k>float</span> <span class=id>distance</span> <span class=t>=</span> <span class=id>Vector3</span><span class=t>.</span><span class="id inv">Distance</span><span class=t>(</span><span class=id>p1</span><span class=t>,</span> <span class=id>p2</span><span class=t>)</span><span class=t>;</span>
	<span class=k>float</span> <span class=id>halfDistance</span> <span class=t>=</span> <span class=id>distance</span> <span class=t>/</span> <span class=n>2.0f</span><span class=t>;</span>
	<span class=k>float</span> <span class=id>halfWidth</span> <span class=t>=</span> <span class=id>width</span> <span class=t>/</span> <span class=n>2.0f</span><span class=t>;</span>

	<span class=id>Vector3</span> <span class=id>difference</span> <span class=t>=</span> <span class=id>p2</span> <span class=t>-</span> <span class=id>p1</span><span class=t>;</span>
	<span class=id>Vector3</span> <span class=id>destination</span> <span class=t>=</span> <span class=k>new</span> <span class="id ty">Vector3</span><span class=t>(</span><span class=id>p1</span><span class=t>.</span><span class=id>X</span> <span class=t>+</span> <span class=id>difference</span><span class=t>.</span><span class=id>X</span> <span class=t>/</span> <span class=n>2.0f</span><span class=t>,</span> <span class=id>p1</span><span class=t>.</span><span class=id>Y</span> <span class=t>+</span> <span class=id>difference</span><span class=t>.</span><span class=id>Y</span> <span class=t>/</span> <span class=n>2.0f</span><span class=t>,</span> <span class=id>p1</span><span class=t>.</span><span class=id>Z</span> <span class=t>+</span> <span class=id>difference</span><span class=t>.</span><span class=id>Z</span><span class=t>)</span><span class=t>;</span>

	<span class=co>// Calculate angle between two points</span>
	<span class=k>float</span> <span class=id>angle</span> <span class=t>=</span> <span class=t>(</span><span class=k>float</span><span class=t>)</span><span class=id>Math</span><span class=t>.</span><span class="id inv">Atan2</span><span class=t>(</span><span class=id>difference</span><span class=t>.</span><span class=id>Y</span><span class=t>,</span> <span class=id>difference</span><span class=t>.</span><span class=id>X</span><span class=t>)</span><span class=t>;</span>

	<span class=id>Vector3</span> <span class=id>v1</span><span class=t>,</span> <span class=id>v2</span><span class=t>,</span> <span class=id>v3</span><span class=t>,</span> <span class=id>v4</span><span class=t>;</span>

	<span class=id>v1</span> <span class=t>=</span> <span class=k>new</span> <span class="id ty">Vector3</span><span class=t>(</span><span class=t>-</span><span class=id>halfDistance</span><span class=t>,</span> <span class=t>-</span><span class=id>halfWidth</span><span class=t>,</span> <span class=n>0</span><span class=t>)</span><span class=t>;</span> <span class=co>// Top Left</span>
	<span class=id>v2</span> <span class=t>=</span> <span class=k>new</span> <span class="id ty">Vector3</span><span class=t>(</span><span class=id>halfDistance</span><span class=t>,</span> <span class=t>-</span><span class=id>halfWidth</span><span class=t>,</span> <span class=n>0</span><span class=t>)</span><span class=t>;</span> <span class=co>// Top Right</span>
	<span class=id>v3</span> <span class=t>=</span> <span class=k>new</span> <span class="id ty">Vector3</span><span class=t>(</span><span class=id>halfDistance</span><span class=t>,</span> <span class=id>halfWidth</span><span class=t>,</span> <span class=n>0</span><span class=t>)</span><span class=t>;</span> <span class=co>// Bottom Right</span>
	<span class=id>v4</span> <span class=t>=</span> <span class=k>new</span> <span class="id ty">Vector3</span><span class=t>(</span><span class=t>-</span><span class=id>halfDistance</span><span class=t>,</span> <span class=id>halfWidth</span><span class=t>,</span> <span class=n>0</span><span class=t>)</span><span class=t>;</span> <span class=co>// Bottom Left</span>

	<span class=id>Matrix</span> <span class=id>m</span> <span class=t>=</span>
		<span class=id>Matrix</span><span class=t>.</span><span class=id>Identity</span> <span class=t>*</span>
		<span class=id>Matrix</span><span class=t>.</span><span class="id inv">CreateRotationZ</span><span class=t>(</span><span class=id>angle</span><span class=t>)</span> <span class=t>*</span>
		<span class=id>Matrix</span><span class=t>.</span><span class="id inv">CreateTranslation</span><span class=t>(</span><span class=id>destination</span><span class=t>)</span><span class=t>;</span>

	<span class=id>v1</span> <span class=t>=</span> <span class=id>Vector3</span><span class=t>.</span><span class="id inv">Transform</span><span class=t>(</span><span class=id>v1</span><span class=t>,</span> <span class=id>m</span><span class=t>)</span><span class=t>;</span>
	<span class=id>v2</span> <span class=t>=</span> <span class=id>Vector3</span><span class=t>.</span><span class="id inv">Transform</span><span class=t>(</span><span class=id>v2</span><span class=t>,</span> <span class=id>m</span><span class=t>)</span><span class=t>;</span>
	<span class=id>v3</span> <span class=t>=</span> <span class=id>Vector3</span><span class=t>.</span><span class="id inv">Transform</span><span class=t>(</span><span class=id>v3</span><span class=t>,</span> <span class=id>m</span><span class=t>)</span><span class=t>;</span>
	<span class=id>v4</span> <span class=t>=</span> <span class=id>Vector3</span><span class=t>.</span><span class="id inv">Transform</span><span class=t>(</span><span class=id>v4</span><span class=t>,</span> <span class=id>m</span><span class=t>)</span><span class=t>;</span>

	<span class="id inv">DrawQuad</span><span class=t>(</span><span class=id>v1</span><span class=t>,</span> <span class=id>c1</span><span class=t>,</span> <span class=id>v2</span><span class=t>,</span> <span class=id>c2</span><span class=t>,</span> <span class=id>v3</span><span class=t>,</span> <span class=id>c2</span><span class=t>,</span> <span class=id>v4</span><span class=t>,</span> <span class=id>c1</span><span class=t>)</span><span class=t>;</span>
<span class=t>}</span>
<span class=t></span></div></code></pre><p>I've left a lot of fluff code out. I usually check if the line is a width of 1 and draw a normal line. I also left out the code on how to draw a quad as that can be found many other places already.</div></div><div class=post><h2><a href=blog/2009/spritesheet-class.html>SpriteSheet Class</a></h2><div class=meta><span class=date><span class=icon-calendar></span>January 09, 2009</span> <span class=tags><span class=icon-price-tags></span>.NET, SpriteSheet, XNA</span></div><div class=content><p>I've been talking with a guy on the creator forums lately about SpriteSheets and so I decided it might be a good idea to post my SpriteSheet class.<p>It's very simple. Only reads sprites from left to right and assumes all Sprites are the same width and height.
<pre><code class=language-csharp><div class=HtmlSyntaxHighlighterDotNet>#region Using<span class="k sta">using</span> <span class="id u">System</span><span class=t>;</span>
<span class="k sta">using</span> <span class="id u">Microsoft</span><span class=t>.</span><span class="id u">Xna</span><span class=t>.</span><span class="id u">Framework</span><span class=t>;</span>
<span class="k sta">using</span> <span class="id u">Microsoft</span><span class=t>.</span><span class="id u">Xna</span><span class=t>.</span><span class="id u">Framework</span><span class=t>.</span><span class="id u">Graphics</span><span class=t>;</span>
#endregion
<span class=k>namespace</span> <span class="id ns">Snow</span><span class=t>.</span><span class="id ns">Xna</span><span class=t>.</span><span class="id ns">Graphics</span>
<span class=t>{</span>
	 <summary>
	/// Spritesheet class.
	/// </summary>
	<span class=k>public</span> <span class=k>class</span> <span class="id ty">SpriteSheet</span>
	<span class=t>{</span>
		#region Fields
		<span class=k>string</span> <span class=id>name</span><span class=t>;</span>

		<span class=id>Texture2D</span> <span class=id>texture</span><span class=t>;</span>

		<span class=id>Rectangle</span><span class=t>[</span><span class=t></span><span class=t>]</span> <span class=id>rectangles</span><span class=t>;</span>

		<span class=k>int</span> <span class=id>spriteWidth</span><span class=t>,</span> <span class=id>spriteHeight</span><span class=t>;</span>

		#endregion
		#region Properties
		 <summary>
		/// The name of this SpriteSheet.
		/// </summary>
		<span class=k>public</span> <span class=k>string</span> <span class="id ty">Name</span>
		<span class=t>{</span>
			<span class=k>get</span> <span class=t>{</span> <span class="k sta">return</span> <span class=id>name</span><span class=t>;</span> <span class=t>}</span>
		<span class=t>}</span>

		 <summary>
		/// The texture for this SpriteSheet.
		/// </summary>
		<span class=k>public</span> <span class=id>Texture2D</span> <span class="id ty">Texture</span>
		<span class=t>{</span>
			<span class=k>get</span> <span class=t>{</span> <span class="k sta">return</span> <span class=id>texture</span><span class=t>;</span> <span class=t>}</span>
		<span class=t>}</span>

		 <summary>
		/// Returns a rectangle for a sprite in the SpriteSheet.
		/// </summary>
		/// <param name=i>index<param>
		/// <returns></returns>
		<span class=k>public</span> <span class="id ty">Rectangle</span> <span class=k>this</span><span class=t>[</span><span class=k>int</span> <span class="id ty">i</span><span class=t>]</span>
		<span class=t>{</span>
			<span class=k>get</span> <span class=t>{</span> <span class="k sta">return</span> <span class=id>rectangles</span><span class=t>[</span><span class=id>i</span><span class=t>]</span><span class=t>;</span> <span class=t>}</span>
		<span class=t>}</span>

		 <summary>
		/// The number of sprites in this SpriteSheet.
		/// </summary>
		<span class=k>public</span> <span class=k>int</span> <span class="id ty">Count</span>
		<span class=t>{</span>
			<span class=k>get</span> <span class=t>{</span> <span class="k sta">return</span> <span class=id>rectangles</span><span class=t>.</span><span class=id>Length</span><span class=t>;</span> <span class=t>}</span>
		<span class=t>}</span>

		 <summary>
		/// The width of the texture.
		/// </summary>
		<span class=k>public</span> <span class=k>int</span> <span class="id ty">Width</span>
		<span class=t>{</span>
			<span class=k>get</span> <span class=t>{</span> <span class="k sta">return</span> <span class=id>texture</span><span class=t>.</span><span class=id>Width</span><span class=t>;</span> <span class=t>}</span>
		<span class=t>}</span>

		 <summary>
		/// The width of each sprite in the SpriteSheet.
		/// </summary>
		<span class=k>public</span> <span class=k>int</span> <span class="id ty">SpriteWidth</span>
		<span class=t>{</span>
			<span class=k>get</span> <span class=t>{</span> <span class="k sta">return</span> <span class=id>spriteWidth</span><span class=t>;</span> <span class=t>}</span>
		<span class=t>}</span>

		 <summary>
		/// The height of the texture.
		/// </summary>
		<span class=k>public</span> <span class=k>int</span> <span class="id ty">Height</span>
		<span class=t>{</span>
			<span class=k>get</span> <span class=t>{</span> <span class="k sta">return</span> <span class=id>texture</span><span class=t>.</span><span class=id>Height</span><span class=t>;</span> <span class=t>}</span>
		<span class=t>}</span>

		 <summary>
		/// The height of each sprite in the SpriteSheet.
		/// </summary>
		<span class=k>public</span> <span class=k>int</span> <span class="id ty">SpriteHeight</span>
		<span class=t>{</span>
			<span class=k>get</span> <span class=t>{</span> <span class="k sta">return</span> <span class=id>spriteHeight</span><span class=t>;</span> <span class=t>}</span>
		<span class=t>}</span>

		#endregion
		 <summary>
		/// Create a new SpriteSheet and determine the number of sprites in the sheet.
		/// </summary>
		/// <param name=texture><param>
		/// <param name=spriteWidth>Width of each sprite.<param>
		/// <param name=spriteHeight>Height of each sprite.<param>
		<span class=k>public</span> <span class="id ty">SpriteSheet</span><span class=t>(</span><span class=k>string</span> <span class="id ty">name</span><span class=t>,</span> <span class="id ty">Texture2D</span> <span class="id ty">texture</span><span class=t>,</span> <span class=k>int</span> <span class="id ty">spriteWidth</span><span class=t>,</span> <span class=k>int</span> <span class="id ty">spriteHeight</span><span class=t>)</span>
			<span class=t>:</span> <span class=k>this</span><span class=t>(</span><span class=id>name</span><span class=t>,</span> <span class=id>texture</span><span class=t>,</span> <span class=id>spriteWidth</span><span class=t>,</span> <span class=id>spriteHeight</span><span class=t>,</span> <span class=n>0</span><span class=t>)</span>
		<span class=t>{</span>
		<span class=t>}</span>

		 <summary>
		/// Create a new SpriteSheet.
		/// </summary>
		/// <param name=texture><param>
		/// <param name=spriteWidth>Width of each sprite.<param>
		/// <param name=spriteHeight>Height of each sprite.<param>
		/// <param name=count>The number of sprites in the sheet.<param>
		<span class=k>public</span> <span class="id ty">SpriteSheet</span><span class=t>(</span><span class=k>string</span> <span class="id ty">name</span><span class=t>,</span> <span class="id ty">Texture2D</span> <span class="id ty">texture</span><span class=t>,</span> <span class=k>int</span> <span class="id ty">spriteWidth</span><span class=t>,</span> <span class=k>int</span> <span class="id ty">spriteHeight</span><span class=t>,</span> <span class=k>int</span> <span class="id ty">count</span><span class=t>)</span>
		<span class=t>{</span>
			<span class=k>this</span><span class=t>.</span><span class=id>name</span> <span class=t>=</span> <span class=id>name</span><span class=t>;</span>
			<span class=k>this</span><span class=t>.</span><span class=id>texture</span> <span class=t>=</span> <span class=id>texture</span><span class=t>;</span>
			<span class=k>this</span><span class=t>.</span><span class=id>spriteWidth</span> <span class=t>=</span> <span class=id>spriteWidth</span><span class=t>;</span>
			<span class=k>this</span><span class=t>.</span><span class=id>spriteHeight</span> <span class=t>=</span> <span class=id>spriteHeight</span><span class=t>;</span>

			<span class="k sta">if</span><span class=t>(</span><span class=id>count</span> <span class=t>==</span> <span class=n>0</span><span class=t>)</span>
			<span class=t>{</span>
				<span class=k>int</span> <span class=id>numX</span> <span class=t>=</span> <span class=id>texture</span><span class=t>.</span><span class=id>Width</span> <span class=t>/</span> <span class=id>spriteWidth</span><span class=t>;</span>
				<span class=k>int</span> <span class=id>numY</span> <span class=t>=</span> <span class=id>texture</span><span class=t>.</span><span class=id>Height</span> <span class=t>/</span> <span class=id>spriteHeight</span><span class=t>;</span>

				<span class=id>rectangles</span> <span class=t>=</span> <span class=k>new</span> <span class=id>Rectangle</span><span class=t>[</span><span class=id>numX</span> <span class=t>*</span> <span class=id>numY</span><span class=t>]</span><span class=t>;</span>
			<span class=t>}</span>
			<span class="k sta">else</span>
			<span class=t>{</span>
				<span class=id>rectangles</span> <span class=t>=</span> <span class=k>new</span> <span class=id>Rectangle</span><span class=t>[</span><span class=id>count</span><span class=t>]</span><span class=t>;</span>
			<span class=t>}</span>

			<span class=k>int</span> <span class=id>x</span> <span class=t>=</span> <span class=n>0</span><span class=t>,</span> <span class=id>y</span> <span class=t>=</span> <span class=n>0</span><span class=t>;</span>
			<span class=k>for</span><span class=t>(</span><span class=k>int</span> <span class=id>i</span> <span class=t>=</span> <span class=n>0</span><span class=t>;</span> <span class=id>i</span> <span class=t><</span> <span class=id>rectangles</span><span class=t>.</span><span class=id>Length</span><span class=t>;</span> <span class=id>i</span><span class=t>++</span><span class=t>)</span>
			<span class=t>{</span>
				<span class=id>rectangles</span><span class=t>[</span><span class=id>i</span><span class=t>]</span> <span class=t>=</span> <span class=k>new</span> <span class="id ty">Rectangle</span><span class=t>(</span><span class=id>x</span><span class=t>,</span> <span class=id>y</span><span class=t>,</span> <span class=id>spriteWidth</span><span class=t>,</span> <span class=id>spriteHeight</span><span class=t>)</span><span class=t>;</span>

				<span class=id>x</span> <span class=t>+=</span> <span class=id>spriteWidth</span><span class=t>;</span>
				<span class="k sta">if</span><span class=t>(</span><span class=id>x</span> <span class=t>>=</span> <span class=id>texture</span><span class=t>.</span><span class=id>Width</span><span class=t>)</span>
				<span class=t>{</span>
					<span class=id>x</span> <span class=t>=</span> <span class=n>0</span><span class=t>;</span>
					<span class=id>y</span> <span class=t>+=</span> <span class=id>spriteHeight</span><span class=t>;</span>
				<span class=t>}</span>
			<span class=t>}</span>
		<span class=t>}</span>

		<span class=k>public</span> <span class=k>static</span> <span class=k>implicit</span> <span class=k>operator</span> <span class="id ty">Texture2D</span><span class=t>(</span><span class="id ty">SpriteSheet</span> <span class="id ty">spriteSheet</span><span class=t>)</span>
		<span class=t>{</span>
			<span class="k sta">return</span> <span class=id>spriteSheet</span><span class=t>.</span><span class=id>Texture</span><span class=t>;</span>
		<span class=t>}</span>
	<span class=t>}</span>
<span class=t>}</span>
<span class=t></span></div></code></pre><p>You can create a new SpriteSheet and use it like this:<p>`
<pre><code class=language-c#><div class=HtmlSyntaxHighlighterDotNet><span class=id>SpriteSheet</span> <span class=id>spriteSheet</span> <span class=t>=</span> <span class=k>new</span> <span class="id ty">SpriteSheet</span><span class=t>(</span><span class=str>"tiles"</span><span class=t>,</span> <span class=id>Content</span><span class=t>.</span><span class="id ty">Load</span><span class=t><</span><span class="id ty">texture2D</span><span class=t>></span><span class=t>(</span><span class=str>"tiles"</span><span class=t>)</span><span class=t>,</span> <span class=n>64</span><span class=t>,</span> <span class=n>64</span><span class=t>)</span><span class=t>;</span>

<span class=id>spriteBatch</span><span class=t>.</span><span class=id>Begin</span><span class=t>(</span><span class=id></span><span class=t></span><span class=id></span><span class=t>)</span>;

<span class=id>spriteBatch</span><span class=t>.</span><span class=id>Draw</span><span class=t>(</span><span class=id>spriteSheet</span><span class=t>,</span>
<span class=id></span><span class=t></span>		        <span class=k>new</span> <span class=id>Rectangle</span><span class=t>(</span>0<span class="id ty"></span><span class=id></span><span class=t>,</span> <span class="id ty"></span><span class=id></span>0<span class=t>,</span> <span class="id ty">spriteSheet</span><span class=t>.</span><span class="id ty">SpriteWidth</span><span class=id></span><span class=t>,</span> <span class="id ty">spriteSheet</span><span class=t>.</span><span class="id ty">SpriteHeight</span><span class=id></span><span class=t>)</span><span class=t></span>,
			<span class=id>spriteSheet</span><span class=t>[</span><span class=n>0</span><span class=t>]</span>,
			<span class=id>Color</span><span class=t>.</span><span class=id>White</span>);

<span class=id>spriteBatch</span><span class=t>.</span><span class=id>End</span><span class=t>(</span><span class=id></span><span class=t></span><span class=id></span><span class=t>)</span>;
<span class=t></span></div></code></pre><p>`<p>Which loads a spritesheet with sprites of size 64x64. It then draws the first Sprite in the SpriteSheet. You of course wouldn't want to load the spritesheet every frame as well.<p>Feel free to use this code without restriction.<p><strong>Edit:</strong> I copied and pasted the second piece of code from somewhere else so I fixed two typos.</div></div><div class=post><h2><a href=blog/2008/colors-and-hex.html>Colors and Hex</a></h2><div class=meta><span class=date><span class=icon-calendar></span>December 21, 2008</span> <span class=tags><span class=icon-price-tags></span>.NET, XNA</span></div><div class=content><p>I recently needed to write out Color(s) as an xml attribute. I wrote 2 methods to read and write the Color(s) as Hex strings. Here ya go:</p><a class=readMore href=blog/2008/colors-and-hex.html>Read More</a></div></div></div><div class=clear></div></main><footer class="p-13 p-md-5 mt-5 text-center text-muted bg-light"><div class=container><ul class=links><li><a href=https://twitter.com/smack0007 class=twitter title=Twitter>Twitter</a><li><a href=https://github.com/smack0007 class=github title=Github>GitHub</a><li><a href=https://paypal.me/smack0007 class=coffee title="Buy me a Coffee">Buy me a Coffee</a><li><a href=feed.rss class=rss title=RSS>RSS</a></ul><p class=mb-0>The Blog of Zachary Snow</div></footer></div><script>document.getElementById("navbar-toggler").onclick=function(){document.getElementById("navbarSupportedContent").classList.toggle("collapse")}</script>