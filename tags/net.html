<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1.0, maximum-scale=1"><meta name=description content=""><meta name=author content="Zachary Snow"><title>.net</title><base href=../ ><link href="https://fonts.googleapis.com/css?family=Open+Sans" rel=stylesheet><link rel=stylesheet type=text/css href=css/style.css><link rel=alternate type=application/rss+xml title="The Blog of Zachary Snow" href=feed.rss><div class=wrap><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><h1><a class=navbar-brand href=/ >The Blog of Zachary Snow</a></h1><button id=navbar-toggler class=navbar-toggler type=button aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation"><span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=index.html>Home</a><li class=nav-item><a class=nav-link href=about.html>About</a><li class=nav-item><a class=nav-link href=tags.html>Tags</a></ul><div class="social my-2 my-lg-0"><a href=https://twitter.com/smack0007 class=twitter title=Twitter><span class=icon-twitter></span></a> <a href=https://github.com/smack0007 class=github title=Github><span class=icon-github></span></a> <a href=https://paypal.me/smack0007 class=coffee title="Buy me a Coffee"><span class=icon-mug></span></a> <a href=feed.rss class=rss title=RSS><span class=icon-rss></span></a></div></div></nav><main class=container><div class=posts><div class=post><h2><a href=blog/2019/use-nameof-to-set-string-variable-to-its-name.html>Use nameof() to set a string variable to its name</a></h2><div class=meta><span class=date><span class=icon-calendar></span>December 17, 2019</span> <span class=tags><span class=icon-price-tags></span>.net, c#</span></div><div class=content><p>This is one of those things that should have just been obvious to me but once I saw it I wondered why I had never thought to use it myself. <code>nameof()</code> can be used when declaring a variable to set the value of the variable to the name of the variable:
<pre><code class="hljs csharp"><span class=hljs-keyword>public</span> <span class=hljs-keyword>const</span> <span class=hljs-keyword>string</span> MyVariable1 = <span class=hljs-keyword>nameof</span>(MyVariable1);

<span class=hljs-function><span class=hljs-keyword>public</span> <span class=hljs-keyword>static</span> <span class=hljs-keyword>void</span> <span class=hljs-title>Main</span>(<span class=hljs-params></span>)</span>
{
    Console.WriteLine(MyVariable1);
}</code></pre><a class=readMore href=blog/2019/use-nameof-to-set-string-variable-to-its-name.html>Read More</a></div></div><div class=post><h2><a href=blog/2019/dynamically-loaded-dll-thows-accessviolationexception-on-first-function-call.html>Dynamically loaded DLL thows AccessViolationException on first function call</a></h2><div class=meta><span class=date><span class=icon-calendar></span>October 22, 2019</span> <span class=tags><span class=icon-price-tags></span>.net, c#</span></div><div class=content><p>In my library <a href=https://github.com/smack0007/GLESDotNet>GLESDotNet</a> I load the <code>libegl.dll</code> and <code>libglesv2.dll</code> DLLs dynamically via the Win32 functions <a href=https://docs.microsoft.com/en-us/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibraryw>LoadLibrary</a> and <a href=https://docs.microsoft.com/en-us/windows/win32/api/libloaderapi/nf-libloaderapi-getprocaddress>GetProcAddress</a>. I already had everything working via <code>DLLImport</code> but I wanted to be able to load the DLLs from different subdirectories depending on the architecture.<p>For the first test I only loaded the <code>libegl.dll</code> DLL before moving on to the <code>libglesv2.dll</code>. I made the classic programmer mistake of changing too much at one time. The first call to any function in <code>libegl.dll</code> resulted in an <code>AccessViolationException</code>. I couldn't figure out what was going wrong so I decided to revert my changes and try again.<p>I noticed that when the DLLs were in the same directory the <code>AccessViolationException</code> went away. Changing the working directory to the directory of the DLLs also solved the problem once the DLLs were placed in subdirectories again. This led me to believe that loading <code>libegl.dll</code> must be implicitly loading <code>libglesv2.dll</code>. Loading <code>libglesv2.dll</code> via <code>LoadLibrary</code> along with <code>libegl.dll</code> solved the problem.</div></div><div class=post><h2><a href=blog/2019/abusing-idisposable.html>Abusing IDisposable</a></h2><div class=meta><span class=date><span class=icon-calendar></span>August 27, 2019</span> <span class=tags><span class=icon-price-tags></span>.net, c#</span></div><div class=content><p>In C# the interface <code>IDisposable</code> is usually used to indicate that an object needs to dispose of unmanaged resources. C# provides the <code>using</code> syntax to ensure that the <code>Dispose</code> method is called once the instance of the object is no longer needed.<p><code>Dispose</code> is just like any other method though and the <code>using</code> syntax can be used quite nicely for other use cases as well. Let's create a class we can use to collect some actions to be "deferred" until a later time.</p><a class=readMore href=blog/2019/abusing-idisposable.html>Read More</a></div></div><div class=post><h2><a href=blog/2019/generating-string-permutations-for-unit-testing.html>Generating string permutations for unit testing</a></h2><div class=meta><span class=date><span class=icon-calendar></span>February 11, 2019</span> <span class=tags><span class=icon-price-tags></span>.net, c#, nunit</span></div><div class=content><p>I needed to parse a string containing 6 characters. Each character should only be one of 3 possibilities: '?' for null, '0' for false or '1' for true. The problem sounded easy enough to generate a whole bunch of unit tests for.</p><a class=readMore href=blog/2019/generating-string-permutations-for-unit-testing.html>Read More</a></div></div><div class=post><h2><a href=blog/2018/string-join-extension-method.html>string.Join Extension Method</a></h2><div class=meta><span class=date><span class=icon-calendar></span>April 19, 2018</span> <span class=tags><span class=icon-price-tags></span>.net, c#, linq</span></div><div class=content><p>Normally if want to do a <code>string.Join</code> on the result of a Linq query you end up with somthing looking like this:
<pre><code class="hljs csharp">Console.WriteLine(<span class=hljs-keyword>string</span>.Join(<span class=hljs-string>", "</span>, numbers.Where(x => x % <span class=hljs-number>2</span> == <span class=hljs-number>0</span>)));</code></pre><p>The call to <code>string.Join</code> has to come first and then the Linq query. I've always felt this breaks the flow of the code and would be easier to read if the <code>string.Join</code> was at the end of the Linq query:
<pre><code class="hljs csharp">Console.WriteLine(numbers.Where(x => x % <span class=hljs-number>2</span> == <span class=hljs-number>0</span>).JoinString(<span class=hljs-string>", "</span>));</code></pre><p>This can be implemented with the following extension methods:
<pre><code class="hljs csharp"><span class=hljs-keyword>public</span> <span class=hljs-keyword>static</span> <span class=hljs-keyword>class</span> <span class=hljs-title>JoinStringExtensions</span>
{
    <span class=hljs-function><span class=hljs-keyword>public</span> <span class=hljs-keyword>static</span> <span class=hljs-keyword>string</span> <span class=hljs-title>JoinString</span>&lt;<span class=hljs-title>T</span>>(<span class=hljs-params><span class=hljs-keyword>this</span> IEnumerable&lt;T> source, <span class=hljs-keyword>string</span> seperator</span>)</span> =>
        <span class=hljs-keyword>string</span>.Join(seperator, source.Select(x => x.ToString()));

    <span class=hljs-function><span class=hljs-keyword>public</span> <span class=hljs-keyword>static</span> <span class=hljs-keyword>string</span> <span class=hljs-title>JoinString</span>(<span class=hljs-params><span class=hljs-keyword>this</span> IEnumerable&lt;<span class=hljs-keyword>string</span>> source, <span class=hljs-keyword>string</span> seperator</span>)</span> =>
        <span class=hljs-keyword>string</span>.Join(seperator, source);
}</code></pre><p>The specialization for <code>IEnumerable&lt;string></code> is just mirroring the implementation from <code>string.Join</code>.</div></div><div class=post><h2><a href=blog/2018/run-program-directly-after-building-vscode.html>Run a program directly after building in VS Code</a></h2><div class=meta><span class=date><span class=icon-calendar></span>April 11, 2018</span> <span class=tags><span class=icon-price-tags></span>.net, .netcore, msbuild, vscode</span></div><div class=content><p>Whenever I have a program that is just a generator of some kind I like to have that program execute directly after having built the program successfully. I'm going to show how to run the program via the dotnet cli but this trick can easily be applied to regular .NET programs or any program which is built using MSBuild.</p><a class=readMore href=blog/2018/run-program-directly-after-building-vscode.html>Read More</a></div></div><div class=post><h2><a href=blog/2018/merging-build-directory-props.html>Merging Build.Directory.props</a></h2><div class=meta><span class=date><span class=icon-calendar></span>April 04, 2018</span> <span class=tags><span class=icon-price-tags></span>msbuild, .net</span></div><div class=content><p>MSBuild version 15 introduced the concept of "Directory.Build.props" files. From the docs:<ul><li><code>Directory.Build.props</code> is a user-defined file that provides customizations to projects under a directory. This file is automatically imported from Microsoft.Common.props unless the property <code>ImportDirectoryBuildTargets</code> is set to false.</ul><p>What is not stated here is that only one <code>Directory.Build.props</code> will be imported automatically. Imagine your project exists in the directory <code>C:\repo\src\foo\foo.csproj</code> and there exists a file in both <code>C:\repo\src\Directory.Build.props</code> and <code>C:\repo\Directory.Build.props</code> then only <code>C:\repo\src\Directory.Build.props</code> will be automatically included when building <code>C:\repo\src\foo\foo.csproj</code>. If you would like <code>C:\repo\Directory.Build.props</code> to be included as well, then <code>C:\repo\src\Directory.Build.props</code> will have to include <code>C:\repo\Directory.Build.props</code> like so:
<pre><code class="hljs xml"><span class=hljs-tag>&lt;<span class=hljs-name>Project</span>></span>
    <span class=hljs-tag>&lt;<span class=hljs-name>Import</span> <span class=hljs-attr>Project</span>=<span class=hljs-string>"$([MSBuild]::GetPathOfFileAbove('Directory.Build.props', '$(MSBuildThisFileDirectory)../'))"</span> /></span>
<span class=hljs-tag>&lt;/<span class=hljs-name>Project</span>></span></code></pre><p>This is documented <a href=https://docs.microsoft.com/en-us/visualstudio/msbuild/customize-your-build#use-case-multi-level-merging>here</a>.</div></div><div class=post><h2><a href=blog/2018/snowball-2.html>Snowball V2.0</a></h2><div class=meta><span class=date><span class=icon-calendar></span>February 23, 2018</span> <span class=tags><span class=icon-price-tags></span>.net, snowball, c#</span></div><div class=content><p>I haven't written anything new here in a very long time and a lot has happened since then. I started a new job at <a href=https://www.beumergroup.com>BeumerGroup</a> this year and now work mostly in TypeScript writing an html5 spa app.<p>In my spare time I've decided to working on version 2.0 of my <a href=https://github.com/smack0007/Snowball>Snowball</a>, my 2D game framework. I've been playing around with the idea for a while now. This version will be developed directly for .net core and will be developed with cross platform capability in mind. The api will look similar but will have some changes.<p>The old repo is still available on my <a href=https://github.com/smack0007/ >github</a> at <a href=https://github.com/smack0007/Snowball_v1>https://github.com/smack0007/Snowball_v1</a>.</div></div><div class=post><h2><a href=blog/2014/linq-calls-iequalitycomparer-gethashcode-before-equals.html>LINQ calls IEqualityComparer&lt;T>.GetHashCode() before Equals()</a></h2><div class=meta><span class=date><span class=icon-calendar></span>November 24, 2014</span> <span class=tags><span class=icon-price-tags></span>.net, linq</span></div><div class=content><p>This is a problem that has bitten me more than a few times so I thought it was about time to write a blog post about it. It's one of those problems that makes you scratch your head for a bit and then the light bulb goes on and you remember you've solved this one before. It occurs whenever you use a LINQ extension method which takes an instance of IEqualityComaparer<t>.</t></p><a class=readMore href=blog/2014/linq-calls-iequalitycomparer-gethashcode-before-equals.html>Read More</a></div></div><div class=post><h2><a href=blog/2014/adding-assembly-references-in-roslyn.html>Adding assembly references in Roslyn</a></h2><div class=meta><span class=date><span class=icon-calendar></span>April 15, 2014</span> <span class=tags><span class=icon-price-tags></span>.net, c#, roslyn</span></div><div class=content><p>In the Roslyn preview that was released at Build 2014 the way references to global assmeblies are added was changed. Before the preview I could use code like this:
<pre><code class="hljs csharp"><span class=hljs-keyword>var</span> compilation = Compilation.Create(assemblyName, <span class=hljs-keyword>new</span> CompilationOptions(OutputKind.DynamicallyLinkedLibrary))
	.AddReferences(MetadataReference.CreateAssemblyReference(<span class=hljs-string>"mscorlib"</span>))
	.AddReferences(MetadataReference.CreateAssemblyReference(<span class=hljs-string>"System"</span>))
	.AddReferences(MetadataReference.CreateAssemblyReference(<span class=hljs-string>"System.Core"</span>))
	.AddReferences(<span class=hljs-keyword>new</span> MetadataFileReference(<span class=hljs-keyword>this</span>.GetType().Assembly.Location))
	.AddSyntaxTrees(syntaxTree);</code></pre><p>The static factory method "MetadataReference.CreateAssemblyReference" added a reference to global assemblies such as "mscorlib.dll" or "System.dll". In the Roslyn preview, the same be achieved like so:
<pre><code class="hljs csharp"><span class=hljs-keyword>var</span> assemblyPath = Path.GetDirectoryName(<span class=hljs-keyword>typeof</span>(<span class=hljs-keyword>object</span>).Assembly.Location);

<span class=hljs-keyword>var</span> compilation = CSharpCompilation.Create(assemblyName)
	.WithOptions(<span class=hljs-keyword>new</span> CSharpCompilationOptions(OutputKind.DynamicallyLinkedLibrary))
	.AddReferences(<span class=hljs-keyword>new</span> MetadataFileReference(Path.Combine(assemblyPath, <span class=hljs-string>"mscorlib.dll"</span>)))
	.AddReferences(<span class=hljs-keyword>new</span> MetadataFileReference(Path.Combine(assemblyPath, <span class=hljs-string>"System.dll"</span>)))
	.AddReferences(<span class=hljs-keyword>new</span> MetadataFileReference(Path.Combine(assemblyPath, <span class=hljs-string>"System.Core.dll"</span>)))
	.AddReferences(<span class=hljs-keyword>new</span> MetadataFileReference(Assembly.GetEntryAssembly().Location))
	.AddSyntaxTrees(syntaxTree);</code></pre></div></div><div class=post><h2><a href=blog/2013/using-component-glue-to-build-your-object-graphs-automatically.html>Using Component Glue to build your object graphs automatically</a></h2><div class=meta><span class=date><span class=icon-calendar></span>July 26, 2013</span> <span class=tags><span class=icon-price-tags></span>open-Source, dependency-injection, ioc, c#, .net</span></div><div class=content><p>Component Glue is an IoC container and you use it of course to wire up your object graphs for you. Component Glue can also build your object graphs for you automatically if there are no interfaces involved. Take this example:</p><script src=https://gist.github.com/smack0007/6091538.js></script><p>In After.cs, you can see that Component Glue is able to build the entire object graph for us. This will include all future dependencies as well so long as interfaces don't come into play. Should an interface be needed, you can just bind that single component.<p>This is a very powerful thing. If one component needs to take on a dependency, just ask for it in the constructor and Component Glue will handle it for you.</div></div><div class=post><h2><a href=blog/2013/component-glue-v1-0.html>Component Glue v1.0</a></h2><div class=meta><span class=date><span class=icon-calendar></span>June 11, 2013</span> <span class=tags><span class=icon-price-tags></span>.net, c#, component-glue, dependency-injection, github, ioc, nuget</span></div><div class=content><p>I finally brought Component Glue up to a state where I felt like the product was finished. You can get it via NuGet:<div class=nuget-badge>`PM> Install-Package ComponentGlue`</div><p>or you can get the source from <a href=https://github.com/smack0007/ComponentGlue>GitHub</a>. The documentation is definitely sparse I know but I recommend taking a look at the unit tests to get a feel for what you can do with Component Glue.<p>Credit for the NuGet CSS <a href=http://www.arunrana.net/2012/01/design-of-nuget-package-installation.html>here</a>.</div></div><div class=post><h2><a href=blog/2013/gldotnet-version-0-6-0.html>GLDotNet Version 0.6.0</a></h2><div class=meta><span class=date><span class=icon-calendar></span>February 19, 2013</span> <span class=tags><span class=icon-price-tags></span>c#, opengl, .net</span></div><div class=content><p>I just released GLDotNet Version 0.6.0.<h2 id=changelog>Changelog:</h2><ul><li>**GLDotNet.Toolkit**: Assembly containing simple app framework.<li>**GLDotNet.Objects**: Assembly containing higher level objects such as Texture2D and VertexBuffer.<li>More overloads added to GLContext class.<li>byte and sbyte are now mapped correctly in generated code.<li>Fixed the naming of some functions so as not to include type notation, i.e. Color4u.<li>Decreased the number of enum values output.</ul></div></div><div class=post><h2><a href=blog/2013/introducing-gldotnet.html>Introducing GLDotNet</a></h2><div class=meta><span class=date><span class=icon-calendar></span>January 02, 2013</span> <span class=tags><span class=icon-price-tags></span>c#, opengl, .net, open-source</span></div><div class=content><p>Today I released a project I've been playing around with for a year or so on Codeplex. It's called <a href=https://gldotnet.codeplex.com/ >GLDotNet</a>. From the project description:<p><em>C# wrapper for OpenGL. Partially generated from the OpenGL spec and partially written by hand, the aim is to have a flexible and native feeling C# binding.</em><p>I have generated functions from the OpenGL spec excluding 1 or 2 but unfortunately of the generated code is untested. There is a demo project included in the source code. The Github repository is located here: <a href=https://github.com/smack0007/GLDotNet>https://github.com/smack0007/GLDotNet</a></div></div><div class=post><h2><a href=blog/2012/snowball-is-now-modular.html>Snowball is now modular</a></h2><div class=meta><span class=date><span class=icon-calendar></span>November 06, 2012</span> <span class=tags><span class=icon-price-tags></span>.net, game-programming</span></div><div class=content><p>The version of Snowball currently on GitHub under the "develop" branch has been split into multiple projects. There is now an assembly for each major piece of Snowball, such as Graphics, Input, Sound. Although this means having to reference more assemblies, the amount of code your project depends on is now smaller. This also makes code maintenance a bit easier as it's more clear now what parts of the library depend on other parts of the library.<p>The parts of the library which really make up a Game Framework has also been split out into their own library. This allows for using Snowball as a just a simple set of libraries or a full blown game framework, depending on what your situation calls for.</div></div><div class=post><h2><a href=blog/2012/id3dxeffectonlostdevice.html>ID3DXEffect::OnLostDevice()</a></h2><div class=meta><span class=date><span class=icon-calendar></span>July 20, 2012</span> <span class=tags><span class=icon-price-tags></span>.net, direct3D9, directx</span></div><div class=content><p>I fixed a bug yesterday in Snowball related to a lost graphics device. I noticed that when I would use CTRL + ALT + DELETE, my apps were crashing. Turned out it was due to not recovering properly from a lost device.<p>The root of the problem was that I needed to call the ID3DXEffect::OnLostDevice() method when the device was being lost. This allows the effect to recover from the lost device. I've made the Effect class in Snowball now do this automatically.</div></div><div class=post><h2><a href=blog/2012/snowball-now-based-on-shaders.html>Snowball - Now based on shaders</a></h2><div class=meta><span class=date><span class=icon-calendar></span>June 26, 2012</span> <span class=tags><span class=icon-price-tags></span>.net, shaders, game-programming</span></div><div class=content><p>I've now merged the "Shaders" branch back into the "master" branch. All rendering is now based on shaders and no longer on the fixed function pipeline.<p>The function of the Renderer class was essentially been reduced to pushing data to the GPU and therefore I decided to rename the class to GraphicsBatch. The Begin() overload which would allow you to specify RendererSettings has been removed and been replaced with an overload which allows you to specify an Effect file to use. Also, the DrawLine() method has been removed, although vertical and horizontal lines can still be drawn using the DrawFilledRectangle() method. Better line drawing should be possible through shaders and I hope to eventually make a sample which provides an example.<p>I've added a sample (pictured above) which demonstrates using a custom shader. By default, GraphicsBatch uses a BasicEffect class which is basically the old way of rendering implemented in a shader.<p>In order for shaders to work properly when using GraphicsBatch, the GraphicsBatch class must pass a few parameters to the shader. At the moment, this only includes a transform matrix but may include more parameters in the future. The GraphicsBatchEffectWrapper can be used to wrap custom effects which you write in order to work with GraphicsBatch correctly. GraphicsBatchEffectWrapper will pass the parameters to your shader by following a standard naming convention. For example, the transform matrix is passed to your shader through a parameter named "TransformMatrix". You can also write you own class which implements IGraphicsBatchEffect. See the sample for an example of using the wrapper class.</div></div><div class=post><h2><a href=blog/2012/snowball-shaders-in-progress.html>Snowball - Shaders in progress</a></h2><div class=meta><span class=date><span class=icon-calendar></span>June 22, 2012</span> <span class=tags><span class=icon-price-tags></span>.net, open-source</span></div><div class=content><p>It's been a long couple of months. I'm in the middle of switching jobs, been on vacation a bit, and have been playing around with OpenGL a bit to get a feel for how that API works compared to Direct3D. As of yesterday I started working on implementing shaders in Snowball.<p>In order to implement shaders or Effect(s), there may have to be a few changes to the API / interface of the Renderer class. Nothing significant I don't think but mainly changes to the Begin() method overloads. Today I pushed the branch which contains my initial implementation.</div></div><div class=post><h2><a href=blog/2012/snowball-now-using-sharpdx.html>Snowball now using SharpDX</a></h2><div class=meta><span class=date><span class=icon-calendar></span>April 16, 2012</span> <span class=tags><span class=icon-price-tags></span>.net, sharpdx, open-source, slimdx</span></div><div class=content><p>For a little while, I was thinking about giving up on Snowball. When you're one guy working on a project that gets to a certain size, it can start to feel a little daunting. You find a bug, and you feel like you need to fix it asap. I don't know if anyone reading this has actually tried Snowball, but if you have, please comment to let me know. It would encourage me.<p>I decided to switch Snowball over to <a href=http://code.google.com/p/sharpdx/ >SharpDX</a>. It's not that I was unhappy with SlimDX, it just seems like there is a lot more innovation happening on the SharpDX side. I also like the fact that I can include the DLLs in the repository so end users don't have to download another dependency in order to compile it. The Win8 stuff is also quite interesting, although the SlimDX guys say they are working on that.<p>I plan to set a road map soon for what I want to include the first release of Snowball. Music and Pixel Shaders are high the list. I've experimented with implementing a UI library but I think I want to push that back for a later release.</div></div><div class=post><h2><a href=blog/2012/getting-started-with-snowball.html>Getting Started with Snowball</a></h2><div class=meta><span class=date><span class=icon-calendar></span>March 04, 2012</span> <span class=tags><span class=icon-price-tags></span>c#, .net, game-programming</span></div><div class=content><p>My game framework Snowball is far enough along that small games can be developed with it by now. The basic overall design is now laid out and not too much is likely to change as I'm now developing my own small games with it.<p>In order to create some kind of documentation on how to use Snowball, I created a Samples folder in the source. In the Samples folder is a WalkingWizard sample. I'm posting this source code here but it can also be viewed on GitHub <a href=https://github.com/smack0007/Snowball/blob/master/Samples/WalkingWizard/WalkingWizardSample.cs>here</a>.</p><script src="https://gist.github.com/2400440.js?file=WalkingWizardSample.cs"></script></div></div><div class=post><h2><a href=blog/2011/winquakecon.html>WinQuakeCon</a></h2><div class=meta><span class=date><span class=icon-calendar></span>December 20, 2011</span> <span class=tags><span class=icon-price-tags></span>.net, github, quake, terminal, windows, winquakecon</span></div><div class=content><p>I've always wanted a program that would allow me have a command line that I could slide in and out of view as needed like the console from <a href=http://en.wikipedia.org/wiki/Quake_(video_game)>Quake</a>. I never could find one and so I finally got decided to write a tool myself. A picture is below and the source code is on <a href=https://github.com/smack0007/WinQuakeCon>GitHub</a>.<p>I'm not putting a download here as I don't consider this finished just yet.</div></div><div class=post><h2><a href=blog/2011/what-is-snowball-and-what-do-i-want-to-do-with-it.html>What is Snowball and what do I want to do with it?</a></h2><div class=meta><span class=date><span class=icon-calendar></span>October 16, 2011</span> <span class=tags><span class=icon-price-tags></span>.net, c#, codeplex, open-source, slimdx, xna</span></div><div class=content><p>I originally got the idea for Snowball after working with the Xna Framework. The Xna Framework is a good piece of software for what it is but there are some things about which I just do not agree with:<ul><li>The content pipeline only works with content in the serialized .xnb format.<li>There are certain content types which can only be loaded via the content pipeline.<li>Certain features don't exist on the PC because they don't exist on the XBox or Windows Phone 7.</ul><p>Xna was designed as an abstraction layer for all the 3 platforms mentioned in the last point, so that one is somewhat understandable. I don't want to write games for my XBox right now though, so why should things like drawing lines not be available to me?<p>With these points in mind I started working on <a href=http://snowball.codeplex.com/ >Snowball</a>. It's designed to be an Xna like framework for making 2D games. It uses SlimDX on the backend, but that is completely abstracted away from consumers of the framework. What I want to do is design the API so that the backend can be swapped out <strong>somewhat</strong> painlessly.<p>I still have a ways to go before I will consider it a version 1.0 release. As of this writing, I'm transitioning to more of a ContentLoader class style for loading your game's content. Any resource type from within the framework can be loaded by hand if you want, the ContentLoader class will just make it easier. After that I have a few other features like GamePad and Music which I would like to implement before saying I have a Beta type release.<p>The future after that is up in the air. I would love to try and have different implementations of the API for Xna and/or OpenTK.<p>I recommend for anyone who is interested as to why an API designer choose to implement the API in the way they did to try it for themselves. I have learned many things from this project including why certain design decisions were made by the Xna Framework team.</div></div><div class=post><h2><a href=blog/2011/wmi-converting-datetime-values-to-datetime-objects.html>WMI - Converting datetime values to DateTime objects</a></h2><div class=meta><span class=date><span class=icon-calendar></span>July 12, 2011</span> <span class=tags><span class=icon-price-tags></span>.net, wmi</span></div><div class=content><p>Just a quick post to hopefully save anyone who finds this some time. If you need to convert a datetime value from a WMI query to a native DateTime object in C#, you can use the method ToDateTime() on the ManagementDateTimeConverter class.
<pre><code class="hljs csharp">ManagementDateTimeConverter.ToDateTime(dmtfDate);</code></pre></div></div><div class=post><h2><a href=blog/2011/snowball-a-slightly-different-direction.html>Snowball: A Slightly Different Direction</a></h2><div class=meta><span class=date><span class=icon-calendar></span>July 02, 2011</span> <span class=tags><span class=icon-price-tags></span>.net, codeplex</span></div><div class=content><p>At first, I had imagined <a href=http://snowball.codeplex.com/ >Snowball</a>, now located on Codeplex, to be a framework which would define how your game objects look. I.E. I had a class called GameEntity which I imagined would handle a lot of boiler plate code for you such as setting up Initialize(), Update(), Draw(), etc.<p>I've decided to move away from that and let Snowball purely focus on the subsystems of a game, such as Graphics, Sound, Input, etc. Extending from the Game class completely sets up these aspects of your game for you. I think I will include helper components, such as a collision detection system, but I will not force you to use them.</div></div><div class=post><h2><a href=blog/2011/xaudio2-stop-currently-playing-sound.html>XAudio2: Stop Currently Playing Sound</a></h2><div class=meta><span class=date><span class=icon-calendar></span>July 02, 2011</span> <span class=tags><span class=icon-price-tags></span>.net, slimdx, xaudio2</span></div><div class=content><p>Using SlimDX, if you want to stop a sound which is currently playing via XAudio2, use the following methods on the SourceVoice object:
<pre><code class="hljs csharp">sourceVoice.Stop();
sourceVoice.FlushSourceBuffers();</code></pre></div></div><div class=post><h2><a href=blog/2011/componentglue-on-github.html>ComponentGlue on GitHub</a></h2><div class=meta><span class=date><span class=icon-calendar></span>May 10, 2011</span> <span class=tags><span class=icon-price-tags></span>.net, component-glue, dependency-injection, ioc</span></div><div class=content><p>I moved the <a href=https://github.com/smack0007/ComponentGlue>ComponentGlue</a> repository to GitHub. I updated the example slightly and cleaned up some of the source code a little. Need to build a full blown app with it eventually.</div></div><div class=post><h2><a href=blog/2011/snowball-and-github.html>Snowball and GitHub</a></h2><div class=meta><span class=date><span class=icon-calendar></span>April 12, 2011</span> <span class=tags><span class=icon-price-tags></span>.net, github, snowball</span></div><div class=content><p>I started writing a 2D Game Engine on <a href=https://github.com/ >GitHub</a>. I call it <a href=https://github.com/smack0007/Snowball>Snowball</a> because I'm original like that.</div></div><div class=post><h2><a href=blog/2011/getting-started-with-slimdx.html>Getting started with SlimDX</a></h2><div class=meta><span class=date><span class=icon-calendar></span>March 31, 2011</span> <span class=tags><span class=icon-price-tags></span>.net, directx</span></div><div class=content><p>*<strong>Update 2013-09-29:</strong> At this point SlimDX is quite out of date and I would recommend starting with <a href=http://sharpdx.org/ >SharpDX</a>.<p>Since I tried OpenTK, I decided to give <a href=http://slimdx.org/ >SlimDX</a> a try as well. So, here's a simple getting started app:
<pre><code class="hljs csharp"><span class=hljs-keyword>using</span> System;
<span class=hljs-keyword>using</span> System.Drawing;
<span class=hljs-keyword>using</span> System.Windows.Forms;
<span class=hljs-keyword>using</span> SlimDX;
<span class=hljs-keyword>using</span> SlimDX.Direct3D9;
<span class=hljs-keyword>using</span> SlimDX.Windows;

<span class=hljs-keyword>namespace</span> <span class=hljs-title>SlimDXApp1</span>
{
	<span class=hljs-keyword>public</span> <span class=hljs-keyword>partial</span> <span class=hljs-keyword>class</span> <span class=hljs-title>SlimDXApp1Form</span> : <span class=hljs-title>RenderForm</span>
	{
		<span class=hljs-keyword>struct</span> Vertex
		{
			<span class=hljs-keyword>public</span> Vector4 Position;
			<span class=hljs-keyword>public</span> <span class=hljs-keyword>int</span> Color;
		}

		Device device;
		VertexDeclaration vertexDeclaration;
		
		<span class=hljs-function><span class=hljs-keyword>public</span> <span class=hljs-title>SlimDXApp1Form</span>(<span class=hljs-params></span>)
			: <span class=hljs-title>base</span>(<span class=hljs-params><span class=hljs-string>"SlimDXApp1"</span></span>)</span>
		{
			<span class=hljs-keyword>this</span>.ClientSize = <span class=hljs-keyword>new</span> Size(<span class=hljs-number>800</span>, <span class=hljs-number>600</span>);

			<span class=hljs-keyword>this</span>.device = <span class=hljs-keyword>new</span> Device(<span class=hljs-keyword>new</span> Direct3D(), <span class=hljs-number>0</span>, DeviceType.Hardware, <span class=hljs-keyword>this</span>.Handle, CreateFlags.HardwareVertexProcessing, <span class=hljs-keyword>new</span> PresentParameters()
            {
                BackBufferWidth = <span class=hljs-keyword>this</span>.ClientSize.Width,
                BackBufferHeight = <span class=hljs-keyword>this</span>.ClientSize.Height
            });

			<span class=hljs-keyword>this</span>.vertexDeclaration = <span class=hljs-keyword>new</span> VertexDeclaration(<span class=hljs-keyword>this</span>.device, <span class=hljs-keyword>new</span>[] {
        		<span class=hljs-keyword>new</span> VertexElement(<span class=hljs-number>0</span>, <span class=hljs-number>0</span>, DeclarationType.Float4, DeclarationMethod.Default, DeclarationUsage.PositionTransformed, <span class=hljs-number>0</span>),
        		<span class=hljs-keyword>new</span> VertexElement(<span class=hljs-number>0</span>, <span class=hljs-number>16</span>, DeclarationType.Color, DeclarationMethod.Default, DeclarationUsage.Color, <span class=hljs-number>0</span>),
				VertexElement.VertexDeclarationEnd
        	});
		}

		<span class=hljs-function><span class=hljs-keyword>public</span> <span class=hljs-keyword>void</span> <span class=hljs-title>Run</span>(<span class=hljs-params></span>)</span>
		{
			MessagePump.Run(<span class=hljs-keyword>this</span>, () =>
			{
				<span class=hljs-keyword>this</span>.device.Clear(ClearFlags.Target | ClearFlags.ZBuffer, Color.Black, <span class=hljs-number>1.0f</span>, <span class=hljs-number>0</span>);
				<span class=hljs-keyword>this</span>.device.BeginScene();

				<span class=hljs-keyword>this</span>.device.VertexDeclaration = <span class=hljs-keyword>this</span>.vertexDeclaration;

				<span class=hljs-keyword>this</span>.device.DrawUserPrimitives&lt;Vertex>(PrimitiveType.TriangleList, <span class=hljs-number>1</span>, <span class=hljs-keyword>new</span>[] {
					<span class=hljs-keyword>new</span> Vertex() { Color = Color.Red.ToArgb(), Position = <span class=hljs-keyword>new</span> Vector4(<span class=hljs-number>400.0f</span>, <span class=hljs-number>100.0f</span>, <span class=hljs-number>0.5f</span>, <span class=hljs-number>1.0f</span>) },
					<span class=hljs-keyword>new</span> Vertex() { Color = Color.Blue.ToArgb(), Position = <span class=hljs-keyword>new</span> Vector4(<span class=hljs-number>650.0f</span>, <span class=hljs-number>500.0f</span>, <span class=hljs-number>0.5f</span>, <span class=hljs-number>1.0f</span>) },
					<span class=hljs-keyword>new</span> Vertex() { Color = Color.Green.ToArgb(), Position = <span class=hljs-keyword>new</span> Vector4(<span class=hljs-number>150.0f</span>, <span class=hljs-number>500.0f</span>, <span class=hljs-number>0.5f</span>, <span class=hljs-number>1.0f</span>) }
				});
				
				<span class=hljs-keyword>this</span>.device.EndScene();
				<span class=hljs-keyword>this</span>.device.Present();
			});
		}

		[<span class=hljs-meta>STAThread</span>]
		<span class=hljs-function><span class=hljs-keyword>static</span> <span class=hljs-keyword>void</span> <span class=hljs-title>Main</span>(<span class=hljs-params></span>)</span>
		{
			SlimDXApp1Form form = <span class=hljs-keyword>new</span> SlimDXApp1Form();
			form.Run();

			<span class=hljs-comment>// Cleans up COM handles</span>
			<span class=hljs-keyword>foreach</span>(<span class=hljs-keyword>var</span> item <span class=hljs-keyword>in</span> ObjectTable.Objects)
				item.Dispose();
		}
	}
}</code></pre></div></div><div class=post><h2><a href=blog/2011/getting-started-with-opentk.html>Getting started with OpenTK</a></h2><div class=meta><span class=date><span class=icon-calendar></span>March 29, 2011</span> <span class=tags><span class=icon-price-tags></span>.net, opengl</span></div><div class=content><p>I started experimenting with <a href=http://www.opentk.com>OpenTK</a> and I had to look in a few places to put this code together, so I'm posting it here for anyone who might be looking for an easy getting started lesson.<p>I've set up a window similar to what I've been used to in Xna (CornflowerBlue 4 life). I've also set up a 2D projection matrix and drawn a triangle in a 2D fashion. You'll need to add a reference to the OpenTK assembly for your project in Visual Studio.
<pre><code class="hljs csharp"><span class=hljs-keyword>using</span> System;
<span class=hljs-keyword>using</span> System.Drawing;
<span class=hljs-keyword>using</span> OpenTK;
<span class=hljs-keyword>using</span> OpenTK.Graphics;
<span class=hljs-keyword>using</span> OpenTK.Graphics.OpenGL;

<span class=hljs-keyword>namespace</span> <span class=hljs-title>OpenTKApp1</span>
{
	<span class=hljs-keyword>public</span> <span class=hljs-keyword>class</span> <span class=hljs-title>AppWindow</span> : <span class=hljs-title>GameWindow</span>
	{
		<span class=hljs-function><span class=hljs-keyword>public</span> <span class=hljs-title>AppWindow</span>(<span class=hljs-params></span>)</span>
		{
			<span class=hljs-keyword>this</span>.Title = <span class=hljs-string>"OpenTK App 1"</span>;
			<span class=hljs-keyword>this</span>.WindowBorder = WindowBorder.Fixed;
			<span class=hljs-keyword>this</span>.ClientSize = <span class=hljs-keyword>new</span> Size(<span class=hljs-number>800</span>, <span class=hljs-number>600</span>);			
		}

		<span class=hljs-function><span class=hljs-keyword>protected</span> <span class=hljs-keyword>override</span> <span class=hljs-keyword>void</span> <span class=hljs-title>OnRenderFrame</span>(<span class=hljs-params>FrameEventArgs e</span>)</span>
		{
			<span class=hljs-keyword>base</span>.OnRenderFrame(e);

			GL.ClearColor(Color.CornflowerBlue);
			GL.Clear(ClearBufferMask.ColorBufferBit | ClearBufferMask.DepthBufferBit);

			GL.MatrixMode(MatrixMode.Projection);
			GL.LoadIdentity();
			GL.Ortho(<span class=hljs-number>0</span>, <span class=hljs-number>800</span>, <span class=hljs-number>600</span>, <span class=hljs-number>0</span>, <span class=hljs-number>-1</span>, <span class=hljs-number>1</span>);
			GL.Viewport(<span class=hljs-number>0</span>, <span class=hljs-number>0</span>, <span class=hljs-number>800</span>, <span class=hljs-number>600</span>);
			
			GL.Begin(BeginMode.Triangles);
			GL.Color3(Color.Red);
			GL.Vertex3(<span class=hljs-number>400</span>, <span class=hljs-number>150</span>, <span class=hljs-number>0</span>);
			GL.Color3(Color.Green);
			GL.Vertex3(<span class=hljs-number>600</span>, <span class=hljs-number>450</span>, <span class=hljs-number>0</span>);
			GL.Color3(Color.Blue);
			GL.Vertex3(<span class=hljs-number>200</span>, <span class=hljs-number>450</span>, <span class=hljs-number>0</span>);
			GL.End();

			GL.Flush();
			<span class=hljs-keyword>this</span>.SwapBuffers();
		}

		[<span class=hljs-meta>STAThread</span>]
		<span class=hljs-function><span class=hljs-keyword>public</span> <span class=hljs-keyword>static</span> <span class=hljs-keyword>void</span> <span class=hljs-title>Main</span>(<span class=hljs-params></span>)</span>
		{
			AppWindow window = <span class=hljs-keyword>new</span> AppWindow();
			window.Run();
		}
	}
}</code></pre></div></div><div class=post><h2><a href=blog/2011/opentk-simple-movable-sprite.html>OpenTK - Simple Movable Sprite</a></h2><div class=meta><span class=date><span class=icon-calendar></span>March 29, 2011</span> <span class=tags><span class=icon-price-tags></span>.net, opengl</span></div><div class=content><p>I wrote my second OpenTK app. This time I'm drawing a sprite which you can move around the screen using the keyboard. I've included the source code after the jump or you can <a href=/files/OpenTKApp2.zip>download it</a>.</p><a class=readMore href=blog/2011/opentk-simple-movable-sprite.html>Read More</a></div></div><div class=post><h2><a href=blog/2011/keeping-splitcontainer-splitterdistance-consistent.html>Keeping SplitContainer SplitterDistance consistent</a></h2><div class=meta><span class=date><span class=icon-calendar></span>February 09, 2011</span> <span class=tags><span class=icon-price-tags></span>.net, winforms</span></div><div class=content><p>If you're having trouble keeping the SplitterDistance property of a SplitContainer consistent across app sessions, you can set the FixedPanel property of the splitter to FixedPanel.Panel1.
<pre><code class="hljs csharp">splitter.FixedPanel = FixedPanel.Panel1;</code></pre><p>I guess this could also work with FixedPanel.Panel2 as well but I haven't given it a try. Credit <a href=http://stackoverflow.com/questions/129362/restoring-splitterdistance-inside-tabcontrol-is-inconsistent>this stackoverflow post</a>.</div></div><div class=post><h2><a href=blog/2010/component-glue.html>Component Glue</a></h2><div class=meta><span class=date><span class=icon-calendar></span>November 02, 2010</span> <span class=tags><span class=icon-price-tags></span>.net, c#, codeplex, ioc, open-source</span></div><div class=content><p>The other day I started an open source project for an <a href=http://www.martinfowler.com/articles/injection.html>IoC Container</a> I call <a href=http://componentglue.codeplex.com/ >Component Glue</a>. It's in a toy / learning tool status right now and I don't know how far I actually want to take the project. More to come though.<p><a href=http://componentglue.codeplex.com/ >Component Glue on Codeplex</a></div></div><div class=post><h2><a href=blog/2010/visual-studio-move-referenced-dll-to-different-directory-after-build.html>Visual Studio - Move referenced DLL to different directory after Build</a></h2><div class=meta><span class=date><span class=icon-calendar></span>July 20, 2010</span> <span class=tags><span class=icon-price-tags></span>.net, msbuild</span></div><div class=content><p>If you need to move a referenced DLL to a different directory after build, add these commands to the "<strong>Post Build event command line</strong>" box in the "<strong>Build Events</strong>" tab of the project properties:
<pre><code>mkdir $(TargetDir)dir
move $(TargetDir)myDLL.dll $(TargetDir)dir\myDLL.dll
</code></pre></div></div><div class=post><h2><a href=blog/2010/xna-load-texture2d-from-embedded-resource.html>Xna: Load Texture2D from Embedded Resource</a></h2><div class=meta><span class=date><span class=icon-calendar></span>July 03, 2010</span> <span class=tags><span class=icon-price-tags></span>.net, embedded-resources</span></div><div class=content><p>If you're writing an app which uses Xna, you may need to load a texture from an embedded resource. Here's how:<p>First embed the resource in your app. Do so by choosing <strong>Embedded Resource</strong> as the <strong>Build Action</strong> in the properties of the resource.<p>After that you can load the <strong>Texture2D</strong> using a stream handle to the embedded file.
<pre><code class="hljs csharp">Stream stream = Assembly.GetCallingAssembly().GetManifestResourceStream(<span class=hljs-string>"AppNamespace.Folder.font.bmp"</span>);
<span class=hljs-keyword>return</span> Texture2D.FromFile(graphicsDevice, stream);</code></pre><p><strong>GetCallingAssembly()</strong> can be exchanged with <strong>GetExecutingAssembly()</strong> if needed. The name of the resource must be fully qualified with the app's namespace and folders. I usually keep my resources in a folder <strong>Resources</strong> so I would have: AppNamespace.Resources.font.bmp.</div></div><div class=post><h2><a href=blog/2010/implementing-basic-dependency-injection-using-services-container.html>Implementing basic Dependency Injection using a Service Container</a></h2><div class=meta><span class=date><span class=icon-calendar></span>June 21, 2010</span> <span class=tags><span class=icon-price-tags></span>.net, c#, dependency-injection, design-patterns, service-continer</span></div><div class=content><p>By extending your Service Container class, a very basic version of dependency injection can be implemented. We'll implement two forms of dependency injection: constructor and property injection.</p><a class=readMore href=blog/2010/implementing-basic-dependency-injection-using-services-container.html>Read More</a></div></div><div class=post><h2><a href=blog/2010/500-downloads-of-the-same-game.html>500 Downloads of the Same Game</a></h2><div class=meta><span class=date><span class=icon-calendar></span>June 09, 2010</span> <span class=tags><span class=icon-price-tags></span>.net, codeplex, same-game, winforms, xna</span></div><div class=content><p>My little Xna game that I wrote nearly 2 years ago reached the 500 downloads mark (binaries and source) the other day. With that said, I'd like to say that I'm working on version 2.0.<p>In version 2.0 I'm going to make the code more event driven. The old code uses the Xna Game class and in the new version I'll be making it WinForms based. Almost a complete rewrite.<p>My work so far is available through SVN on the project's <a href=http://samegamexna.codeplex.com/ >Codeplex page</a>.</div></div><div class=post><h2><a href=blog/2010/progress-bars-in-windows-7-taskbars.html>Progress Bar in Windows 7 Taskbars</a></h2><div class=meta><span class=date><span class=icon-calendar></span>June 01, 2010</span> <span class=tags><span class=icon-price-tags></span>.net, c#, windows-7</span></div><div class=content><p>I decided to add progress bar to the Windows 7 Taskbar in my Timer app.<p>I started by downloading and compiling the <a href=http://code.msdn.microsoft.com/WindowsAPICodePack>Windows API Code Pack</a> in Release mode. I then added a reference to the Microsoft.WindowsAPICodePack.dll and Microsoft.WindowsAPICodePack.Shell.dll files to the project. After that add the lines:
<pre><code class="hljs csharp"><span class=hljs-keyword>using</span> Microsoft.WindowsAPICodePack.Taskbar;</code></pre><p>to your using statements. When the clock starts running I create the progress bar in the taskbar with:
<pre><code class="hljs csharp"><span class=hljs-comment>// Initialize progress bar</span>
<span class=hljs-keyword>if</span>(TaskbarManager.IsPlatformSupported)
{
	TaskbarManager.Instance.SetProgressState(TaskbarProgressBarState.Normal);
	TaskbarManager.Instance.SetProgressValue(<span class=hljs-number>0</span>, (<span class=hljs-keyword>int</span>)<span class=hljs-keyword>this</span>.totalTime.TotalSeconds, <span class=hljs-keyword>this</span>.Handle);
}</code></pre><p>to stop the progress bar:
<pre><code class="hljs csharp"><span class=hljs-comment>// Stop progress bar</span>
<span class=hljs-keyword>if</span>(TaskbarManager.IsPlatformSupported)
	TaskbarManager.Instance.SetProgressState(TaskbarProgressBarState.NoProgress);</code></pre><p>and finally to update the progress bar on each tick:
<pre><code class="hljs csharp"><span class=hljs-comment>// Update progress bar</span>
<span class=hljs-keyword>if</span>(TaskbarManager.IsPlatformSupported)
	TaskbarManager.Instance.SetProgressValue((<span class=hljs-keyword>int</span>)<span class=hljs-keyword>this</span>.totalTime.TotalSeconds - (<span class=hljs-keyword>int</span>)<span class=hljs-keyword>this</span>.time.TotalSeconds, (<span class=hljs-keyword>int</span>)<span class=hljs-keyword>this</span>.totalTime.TotalSeconds, <span class=hljs-keyword>this</span>.Handle);</code></pre></div></div><div class=post><h2><a href=blog/2010/winforms-and-mvc.html>WinForms and MVC</a></h2><div class=meta><span class=date><span class=icon-calendar></span>May 26, 2010</span> <span class=tags><span class=icon-price-tags></span>.net, mvc, winforms</span></div><div class=content><p>I recently became interested in doing MVC inside of a Windows Forms app. I found a few MVC frameworks which work with WinForms (<a href=http://stackoverflow.com/questions/2406/looking-for-a-mvc-sample-for-winforms>see here</a>) but they didn't really interest me. Too heavy I felt for what I was looking to do. I ended up with a solution looking something like this:<p>There is really only one controller and that is the "Application" class. It contains all the methods your app can call to manipulate your models, which are in the "Data" folder / namespace. The "WinFormsApplication" class inherits from the "Application" class and just sets the view to an instance of "WinFormsView". The "Application" class communicates with the view through the "IView" interface. The "WinFormsView" class is a Windows Forms implementation of that view. The "Application" class and your models are not coupled in any way to your Windows Forms implementation of the view.<p>If you want you view to be as dumb as possible, your view can communicate with the "Application" class only through events. In my case though, I choose to go with a smart view and have the view call back to methods in the "Application" class. The "Application" class tells the view when models are loaded and unloaded. The view subscribes to events on the models and reacts to the events.<p>All of my forms and controls communicate with each other through the "WinFormsView" class. One control might change the value of a property in the "WinFormsView" class and another control might subscribe to a change event and update as necessary. This keeps the controls and forms slightly less coupled.<p>It's not a perfect implementation of MVC but it keeps my model logic decoupled enough from my view logic that I can later implement a WPF version of the view I think.</div></div><div class=post><h2><a href=blog/2010/drawing-rectangles-with-spritebatch.html>Drawing Rectangles with SpriteBatch</a></h2><div class=meta><span class=date><span class=icon-calendar></span>March 29, 2010</span> <span class=tags><span class=icon-price-tags></span>.net, c#, code-snippets, xna</span></div><div class=content><p>Just a quick code snippet which adds an extension method for drawing Rectangles to SpriteBatch:
<pre><code class="hljs csharp"><span class=hljs-keyword>public</span> <span class=hljs-keyword>static</span> <span class=hljs-keyword>class</span> <span class=hljs-title>SpriteBatchHelper</span>
{
	<span class=hljs-keyword>static</span> Texture2D pixel;

	<span class=hljs-function><span class=hljs-keyword>private</span> <span class=hljs-keyword>static</span> <span class=hljs-keyword>void</span> <span class=hljs-title>LoadPixel</span>(<span class=hljs-params>GraphicsDevice graphicsDevice</span>)</span>
	{
		<span class=hljs-keyword>if</span>(pixel == <span class=hljs-literal>null</span>)
		{
			pixel = <span class=hljs-keyword>new</span> Texture2D(graphicsDevice, <span class=hljs-number>1</span>, <span class=hljs-number>1</span>);
			pixel.SetData&amp;lt;Color&amp;gt;(<span class=hljs-keyword>new</span> Color[] { Color.White });
		}
	}

	<span class=hljs-function><span class=hljs-keyword>public</span> <span class=hljs-keyword>static</span> <span class=hljs-keyword>void</span> <span class=hljs-title>DrawRectangle</span>(<span class=hljs-params><span class=hljs-keyword>this</span> SpriteBatch spriteBatch, Rectangle rectangle, Color color</span>)</span>
	{
		LoadPixel(spriteBatch.GraphicsDevice);
		spriteBatch.Draw(pixel, rectangle, color);
	}
}</code></pre></div></div><div class=post><h2><a href=blog/2010/csharp-extension-methods-in-your-own-library.html>C# Extension Methods in your own Library</a></h2><div class=meta><span class=date><span class=icon-calendar></span>March 08, 2010</span> <span class=tags><span class=icon-price-tags></span>.net, c#, extension-methods</span></div><div class=content><p>Normally I use extension methods in C# to extend a library that I did not write and therefore I have no control over. There are situations where it makes sense to use extension methods for a library that you yourself are writing.<p>For example, when you have interfaces in your library. You want to keep the number of methods in that interface as low as possible so that classes implementing the interface don't have to do a lot of heavy lifting. This means cutting out methods in an interface that are for the most part just syntactic sugar for another method in the interface.
<pre><code class="hljs csharp"><span class=hljs-keyword>public</span> <span class=hljs-keyword>interface</span> <span class=hljs-title>IServiceContainer</span>
{
    <span class=hljs-function><span class=hljs-keyword>void</span> <span class=hljs-title>AddService</span>(<span class=hljs-params>Type type, Object provider</span>)</span>;
    <span class=hljs-function><span class=hljs-keyword>object</span> <span class=hljs-title>GetService</span>(<span class=hljs-params>Type type</span>)</span>;
}

<span class=hljs-keyword>public</span> <span class=hljs-keyword>static</span> <span class=hljs-keyword>class</span> <span class=hljs-title>IServiceContainerExtensions</span>
{
    <span class=hljs-keyword>public</span> <span class=hljs-keyword>static</span> <span class=hljs-keyword>void</span> AddService&amp;lt;T&amp;gt;(<span class=hljs-keyword>this</span> IServiceContainer services, <span class=hljs-keyword>object</span> provider)
    {
        services.AddService(<span class=hljs-keyword>typeof</span>(T), provider);
    }

    <span class=hljs-keyword>public</span> <span class=hljs-keyword>static</span> T GetService&amp;lt;T&amp;gt;(<span class=hljs-keyword>this</span> IServiceContainer services) <span class=hljs-keyword>where</span> T : <span class=hljs-keyword>class</span>
    {
        <span class=hljs-keyword>return</span> services.GetService(<span class=hljs-keyword>typeof</span>(T)) <span class=hljs-keyword>as</span> T;
    }

    <span class=hljs-keyword>public</span> <span class=hljs-keyword>static</span> T GetRequiredService&amp;lt;T&amp;gt;(<span class=hljs-keyword>this</span> IServiceContainer services) <span class=hljs-keyword>where</span> T : <span class=hljs-keyword>class</span>
    {
        T service = services.GetService(<span class=hljs-keyword>typeof</span>(T)) <span class=hljs-keyword>as</span> T;

        <span class=hljs-keyword>if</span>(service == <span class=hljs-literal>null</span>)
            <span class=hljs-keyword>throw</span> <span class=hljs-keyword>new</span> ServiceNotFoundException(<span class=hljs-keyword>typeof</span>(T));

        <span class=hljs-keyword>return</span> service;
    }
}</code></pre><p>All of the methods in IServiceContainerExtensions are just helper methods for method in IServiceContainer. By making them extension methods in our own library though, we've made the barrier to entry lower. Other people can implement the interface and in a sense "inherit" the helper methods as well.</div></div><div class=post><h2><a href=blog/2010/creating-and-consuming-services-in-your-xna-game.html>Creating and consuming services in your XNA Game</a></h2><div class=meta><span class=date><span class=icon-calendar></span>February 18, 2010</span> <span class=tags><span class=icon-price-tags></span>.net</span></div><div class=content><p>The <a href=http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.gameservicecontainer.aspx>GameServiceContainer</a> implements the <a href=http://msdn.microsoft.com/en-us/library/system.iserviceprovider.aspx>IServiceProvider</a> interface and the MSDN documentation says about the IServiceProvider interface:<blockquote>Defines a mechanism for retrieving a service object; that is, an object that provides custom support to other objects.</blockquote><p>This article will "<em>attempt</em>" to describe how can you use the GameServiceContainer in your XNA game, in both your GameComponent(s) and your game's entity objects.</p><a class=readMore href=blog/2010/creating-and-consuming-services-in-your-xna-game.html>Read More</a></div></div><div class=post><h2><a href=blog/2010/changing-the-platformtarge-in-visual-c-express.html>Changing the PlatformTarget in Visual C# Express</a></h2><div class=meta><span class=date><span class=icon-calendar></span>January 18, 2010</span> <span class=tags><span class=icon-price-tags></span>.net, msbuild</span></div><div class=content><p>Some project types in Visual C# Express (Empty Project) will not allow you to change the PlatformTarget from the UI. You can still change the target platform though by editing the .csproj file in a text editor. Close the project and open it up in your favorite text editor (I use <a href=http://notepad-plus.sourceforge.net/ >Notpad++</a>). The .csproj file is really just a XML file. You should see somewhere in the file something like:
<pre><code class="hljs xml"><span class=hljs-tag>&lt;<span class=hljs-name>PropertyGroup</span> <span class=hljs-attr>Condition</span>=<span class=hljs-string>" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' "</span>></span>
		....
	<span class=hljs-tag>&lt;/<span class=hljs-name>PropertyGroup</span>></span>
	<span class=hljs-tag>&lt;<span class=hljs-name>PropertyGroup</span> <span class=hljs-attr>Condition</span>=<span class=hljs-string>" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' "</span>></span>
		....
	<span class=hljs-tag>&lt;/<span class=hljs-name>PropertyGroup</span>></span></code></pre><p>Inside the PropertyGroup elements, add the PlatformTarget element:
<pre><code class="hljs xml"><span class=hljs-tag>&lt;<span class=hljs-name>PropertyGroup</span> <span class=hljs-attr>Condition</span>=<span class=hljs-string>" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' "</span>></span>
		....
		<span class=hljs-tag>&lt;<span class=hljs-name>PlatformTarget</span>></span>x86<span class=hljs-tag>&lt;/<span class=hljs-name>PlatformTarget</span>></span>
	<span class=hljs-tag>&lt;/<span class=hljs-name>PropertyGroup</span>></span>
	<span class=hljs-tag>&lt;<span class=hljs-name>PropertyGroup</span> <span class=hljs-attr>Condition</span>=<span class=hljs-string>" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' "</span>></span>
		....
		<span class=hljs-tag>&lt;<span class=hljs-name>PlatformTarget</span>></span>x86<span class=hljs-tag>&lt;/<span class=hljs-name>PlatformTarget</span>></span>
	<span class=hljs-tag>&lt;/<span class=hljs-name>PropertyGroup</span>></span></code></pre><p>Save the file and open your project back up. Your project's output should now target only x86.</div></div><div class=post><h2><a href=blog/2009/calculating-an-angle-from-a-vector2.html>Calculating an angle from a Vector2</a></h2><div class=meta><span class=date><span class=icon-calendar></span>February 28, 2009</span> <span class=tags><span class=icon-price-tags></span>.net, vectors, xna</span></div><div class=content><p>When you need to calculate an angle from a Vector2 structure, you can use this piece of code:
<pre><code class="hljs csharp"><span class=hljs-keyword>public</span> <span class=hljs-keyword>static</span> <span class=hljs-keyword>class</span> <span class=hljs-title>Vector2Helper</span>
{
	<span class=hljs-function><span class=hljs-keyword>public</span> <span class=hljs-keyword>static</span> <span class=hljs-keyword>float</span> <span class=hljs-title>CalculateAngle</span>(<span class=hljs-params>Vector2 v</span>)</span>
	{
		<span class=hljs-keyword>float</span> angle = <span class=hljs-number>0.0f</span>;

		<span class=hljs-keyword>if</span>(v != Vector2.Zero)
		{
			v.Normalize();

			angle = (<span class=hljs-keyword>float</span>)Math.Acos(v.Y);

			<span class=hljs-keyword>if</span>(v.X &amp;lt; <span class=hljs-number>0.0f</span>)
			angle = -angle;
		}

		<span class=hljs-keyword>return</span> angle;
	}
}</code></pre><p>I used this to calculate an angle from the Vector2 of the Left Stick.<p>The original credit for this source code comes from <a href=http://xnagamer.spaces.live.com/blog/cns!EC20BAAE6808B682!139.entry>here</a>.</div></div><div class=post><h2><a href=blog/2009/drawing-2d-lines-as-rotated-quads.html>Drawing 2D Lines as Rotated Quads</a></h2><div class=meta><span class=date><span class=icon-calendar></span>February 07, 2009</span> <span class=tags><span class=icon-price-tags></span>.net</span></div><div class=content><p>I haven't had much time lately with work but one question I've seen asked many many times is how to draw lines of different widths. So, to cut to the chase I'll share the code I've used to do it.
<pre><code class="hljs csharp"><span class=hljs-function><span class=hljs-keyword>public</span> <span class=hljs-keyword>void</span> <span class=hljs-title>DrawLine</span>(<span class=hljs-params>Vector3 p1, Color c1, Vector3 p2, Color c2, <span class=hljs-keyword>int</span> width</span>)</span>
{
	<span class=hljs-keyword>float</span> distance = Vector3.Distance(p1, p2);
	<span class=hljs-keyword>float</span> halfDistance = distance / <span class=hljs-number>2.0f</span>;
	<span class=hljs-keyword>float</span> halfWidth = width / <span class=hljs-number>2.0f</span>;

	Vector3 difference = p2 - p1;
	Vector3 destination = <span class=hljs-keyword>new</span> Vector3(p1.X + difference.X / <span class=hljs-number>2.0f</span>, p1.Y + difference.Y / <span class=hljs-number>2.0f</span>, p1.Z + difference.Z);

	<span class=hljs-comment>// Calculate angle between two points</span>
	<span class=hljs-keyword>float</span> angle = (<span class=hljs-keyword>float</span>)Math.Atan2(difference.Y, difference.X);

	Vector3 v1, v2, v3, v4;

	v1 = <span class=hljs-keyword>new</span> Vector3(-halfDistance, -halfWidth, <span class=hljs-number>0</span>); <span class=hljs-comment>// Top Left</span>
	v2 = <span class=hljs-keyword>new</span> Vector3(halfDistance, -halfWidth, <span class=hljs-number>0</span>); <span class=hljs-comment>// Top Right</span>
	v3 = <span class=hljs-keyword>new</span> Vector3(halfDistance, halfWidth, <span class=hljs-number>0</span>); <span class=hljs-comment>// Bottom Right</span>
	v4 = <span class=hljs-keyword>new</span> Vector3(-halfDistance, halfWidth, <span class=hljs-number>0</span>); <span class=hljs-comment>// Bottom Left</span>

	Matrix m =
		Matrix.Identity *
		Matrix.CreateRotationZ(angle) *
		Matrix.CreateTranslation(destination);

	v1 = Vector3.Transform(v1, m);
	v2 = Vector3.Transform(v2, m);
	v3 = Vector3.Transform(v3, m);
	v4 = Vector3.Transform(v4, m);

	DrawQuad(v1, c1, v2, c2, v3, c2, v4, c1);
}</code></pre><p>I've left a lot of fluff code out. I usually check if the line is a width of 1 and draw a normal line. I also left out the code on how to draw a quad as that can be found many other places already.</div></div><div class=post><h2><a href=blog/2009/spritesheet-class.html>SpriteSheet Class</a></h2><div class=meta><span class=date><span class=icon-calendar></span>January 09, 2009</span> <span class=tags><span class=icon-price-tags></span>.net, xna</span></div><div class=content><p>I've been talking with a guy on the creator forums lately about SpriteSheets and so I decided it might be a good idea to post my SpriteSheet class.<p>It's very simple. Only reads sprites from left to right and assumes all Sprites are the same width and height.
<pre><code class="hljs csharp"><span class=hljs-meta>#<span class=hljs-meta-keyword>region</span> Using</span>
<span class=hljs-keyword>using</span> System;
<span class=hljs-keyword>using</span> Microsoft.Xna.Framework;
<span class=hljs-keyword>using</span> Microsoft.Xna.Framework.Graphics;
<span class=hljs-meta>#<span class=hljs-meta-keyword>endregion</span></span>

<span class=hljs-keyword>namespace</span> <span class=hljs-title>Snow.Xna.Graphics</span>
{
	<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;summary></span></span>
	<span class=hljs-comment><span class=hljs-doctag>///</span> Spritesheet class.</span>
	<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;/summary></span></span>
	<span class=hljs-keyword>public</span> <span class=hljs-keyword>class</span> <span class=hljs-title>SpriteSheet</span>
	{
		<span class=hljs-meta>#<span class=hljs-meta-keyword>region</span> Fields</span>

		<span class=hljs-keyword>string</span> name;

		Texture2D texture;

		Rectangle[] rectangles;

		<span class=hljs-keyword>int</span> spriteWidth, spriteHeight;

		<span class=hljs-meta>#<span class=hljs-meta-keyword>endregion</span></span>

		<span class=hljs-meta>#<span class=hljs-meta-keyword>region</span> Properties</span>

		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;summary></span></span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> The name of this SpriteSheet.</span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;/summary></span></span>
		<span class=hljs-keyword>public</span> <span class=hljs-keyword>string</span> Name
		{
			<span class=hljs-keyword>get</span> { <span class=hljs-keyword>return</span> name; }
		}

		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;summary></span></span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> The texture for this SpriteSheet.</span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;/summary></span></span>
		<span class=hljs-keyword>public</span> Texture2D Texture
		{
			<span class=hljs-keyword>get</span> { <span class=hljs-keyword>return</span> texture; }
		}

		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;summary></span></span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> Returns a rectangle for a sprite in the SpriteSheet.</span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;/summary></span></span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;param name="i"></span>index<span class=hljs-doctag>&lt;/param></span></span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;returns></span><span class=hljs-doctag>&lt;/returns></span></span>
		<span class=hljs-keyword>public</span> Rectangle <span class=hljs-keyword>this</span>[<span class=hljs-keyword>int</span> i]
		{
			<span class=hljs-keyword>get</span> { <span class=hljs-keyword>return</span> rectangles[i]; }
		}

		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;summary></span></span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> The number of sprites in this SpriteSheet.</span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;/summary></span></span>
		<span class=hljs-keyword>public</span> <span class=hljs-keyword>int</span> Count
		{
			<span class=hljs-keyword>get</span> { <span class=hljs-keyword>return</span> rectangles.Length; }
		}

		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;summary></span></span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> The width of the texture.</span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;/summary></span></span>
		<span class=hljs-keyword>public</span> <span class=hljs-keyword>int</span> Width
		{
			<span class=hljs-keyword>get</span> { <span class=hljs-keyword>return</span> texture.Width; }
		}

		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;summary></span></span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> The width of each sprite in the SpriteSheet.</span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;/summary></span></span>
		<span class=hljs-keyword>public</span> <span class=hljs-keyword>int</span> SpriteWidth
		{
			<span class=hljs-keyword>get</span> { <span class=hljs-keyword>return</span> spriteWidth; }
		}

		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;summary></span></span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> The height of the texture.</span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;/summary></span></span>
		<span class=hljs-keyword>public</span> <span class=hljs-keyword>int</span> Height
		{
			<span class=hljs-keyword>get</span> { <span class=hljs-keyword>return</span> texture.Height; }
		}

		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;summary></span></span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> The height of each sprite in the SpriteSheet.</span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;/summary></span></span>
		<span class=hljs-keyword>public</span> <span class=hljs-keyword>int</span> SpriteHeight
		{
			<span class=hljs-keyword>get</span> { <span class=hljs-keyword>return</span> spriteHeight; }
		}

		<span class=hljs-meta>#<span class=hljs-meta-keyword>endregion</span></span>

		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;summary></span></span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> Create a new SpriteSheet and determine the number of sprites in the sheet.</span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;/summary></span></span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;param name="texture"></span><span class=hljs-doctag>&lt;/param></span></span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;param name="spriteWidth"></span>Width of each sprite.<span class=hljs-doctag>&lt;/param></span></span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;param name="spriteHeight"></span>Height of each sprite.<span class=hljs-doctag>&lt;/param></span></span>
		<span class=hljs-function><span class=hljs-keyword>public</span> <span class=hljs-title>SpriteSheet</span>(<span class=hljs-params><span class=hljs-keyword>string</span> name, Texture2D texture, <span class=hljs-keyword>int</span> spriteWidth, <span class=hljs-keyword>int</span> spriteHeight</span>)
			: <span class=hljs-title>this</span>(<span class=hljs-params>name, texture, spriteWidth, spriteHeight, <span class=hljs-number>0</span></span>)</span>
		{
		}

		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;summary></span></span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> Create a new SpriteSheet.</span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;/summary></span></span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;param name="texture"></span><span class=hljs-doctag>&lt;/param></span></span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;param name="spriteWidth"></span>Width of each sprite.<span class=hljs-doctag>&lt;/param></span></span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;param name="spriteHeight"></span>Height of each sprite.<span class=hljs-doctag>&lt;/param></span></span>
		<span class=hljs-comment><span class=hljs-doctag>///</span> <span class=hljs-doctag>&lt;param name="count"></span>The number of sprites in the sheet.<span class=hljs-doctag>&lt;/param></span></span>
		<span class=hljs-function><span class=hljs-keyword>public</span> <span class=hljs-title>SpriteSheet</span>(<span class=hljs-params><span class=hljs-keyword>string</span> name, Texture2D texture, <span class=hljs-keyword>int</span> spriteWidth, <span class=hljs-keyword>int</span> spriteHeight, <span class=hljs-keyword>int</span> count</span>)</span>
		{
			<span class=hljs-keyword>this</span>.name = name;
			<span class=hljs-keyword>this</span>.texture = texture;
			<span class=hljs-keyword>this</span>.spriteWidth = spriteWidth;
			<span class=hljs-keyword>this</span>.spriteHeight = spriteHeight;

			<span class=hljs-keyword>if</span>(count == <span class=hljs-number>0</span>)
			{
				<span class=hljs-keyword>int</span> numX = texture.Width / spriteWidth;
				<span class=hljs-keyword>int</span> numY = texture.Height / spriteHeight;

				rectangles = <span class=hljs-keyword>new</span> Rectangle[numX * numY];
			}
			<span class=hljs-keyword>else</span>
			{
				rectangles = <span class=hljs-keyword>new</span> Rectangle[count];
			}

			<span class=hljs-keyword>int</span> x = <span class=hljs-number>0</span>, y = <span class=hljs-number>0</span>;
			<span class=hljs-keyword>for</span>(<span class=hljs-keyword>int</span> i = <span class=hljs-number>0</span>; i &lt; rectangles.Length; i++)
			{
				rectangles[i] = <span class=hljs-keyword>new</span> Rectangle(x, y, spriteWidth, spriteHeight);

				x += spriteWidth;
				<span class=hljs-keyword>if</span>(x >= texture.Width)
				{
					x = <span class=hljs-number>0</span>;
					y += spriteHeight;
				}
			}
		}

		<span class=hljs-function><span class=hljs-keyword>public</span> <span class=hljs-keyword>static</span> <span class=hljs-keyword>implicit</span> <span class=hljs-keyword>operator</span> <span class=hljs-title>Texture2D</span>(<span class=hljs-params>SpriteSheet spriteSheet</span>)</span>
		{
			<span class=hljs-keyword>return</span> spriteSheet.Texture;
		}
	}
}</code></pre><p>You can create a new SpriteSheet and use it like this:<p>`
<pre><code class="hljs csharp">SpriteSheet spriteSheet = <span class=hljs-keyword>new</span> SpriteSheet(<span class=hljs-string>"tiles"</span>, Content.Load&lt;texture2D>(<span class=hljs-string>"tiles"</span>), <span class=hljs-number>64</span>, <span class=hljs-number>64</span>);

spriteBatch.Begin();

spriteBatch.Draw(spriteSheet,
		        <span class=hljs-keyword>new</span> Rectangle(<span class=hljs-number>0</span>, <span class=hljs-number>0</span>, spriteSheet.SpriteWidth, spriteSheet.SpriteHeight),
			spriteSheet[<span class=hljs-number>0</span>],
			Color.White);

spriteBatch.End();</code></pre><p>`<p>Which loads a spritesheet with sprites of size 64x64. It then draws the first Sprite in the SpriteSheet. You of course wouldn't want to load the spritesheet every frame as well.<p>Feel free to use this code without restriction.<p><strong>Edit:</strong> I copied and pasted the second piece of code from somewhere else so I fixed two typos.</div></div><div class=post><h2><a href=blog/2008/colors-and-hex.html>Colors and Hex</a></h2><div class=meta><span class=date><span class=icon-calendar></span>December 21, 2008</span> <span class=tags><span class=icon-price-tags></span>.net, xna</span></div><div class=content><p>I recently needed to write out Color(s) as an xml attribute. I wrote 2 methods to read and write the Color(s) as Hex strings. Here ya go:</p><a class=readMore href=blog/2008/colors-and-hex.html>Read More</a></div></div></div><div class=clear></div></main><footer class="p-13 p-md-5 mt-5 text-center text-muted bg-light"><div class=container><ul class=links><li><a href=https://twitter.com/smack0007 class=twitter title=Twitter>Twitter</a><li><a href=https://github.com/smack0007 class=github title=Github>GitHub</a><li><a href=https://paypal.me/smack0007 class=coffee title="Buy me a Coffee">Buy me a Coffee</a><li><a href=feed.rss class=rss title=RSS>RSS</a></ul><p class=mb-0>The Blog of Zachary Snow</div></footer></div><script>document.getElementById("navbar-toggler").onclick=function(){document.getElementById("navbarSupportedContent").classList.toggle("collapse")}</script>