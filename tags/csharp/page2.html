<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0"><meta name="description" content=""><meta name="author" content="Zachary Snow"><title>c#</title><base href="https://smack0007.github.io"></base><link rel="stylesheet" type="text/css" href="css/style.css"><link rel="alternate" type="application/rss+xml" title="The Blog of Zachary Snow" href="feed.rss"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"></head><body><div class="wrap"><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><h1><a class="navbar-brand" href="/">The Blog of Zachary Snow</a></h1><button id="navbar-toggler" class="navbar-toggler" type="button" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav mr-auto"><li class="nav-item"><a class="nav-link" href="index.html">Home</a></li><li class="nav-item"><a class="nav-link" href="about.html">About</a></li><li class="nav-item"><a class="nav-link active" href="tags/index.html">Tags<span class="visually-hidden">(current)</span></a></li></ul><div class="social my-2 my-lg-0"><a href="https://twitter.com/smack0007" class="twitter" title="Twitter"><span class="icon-twitter"></span></a><a href="https://github.com/smack0007" class="github" title="Github"><span class="icon-github"></span></a><a href="https://paypal.me/smack0007" class="coffee" title="Buy me a Coffee"><span class="icon-mug"></span></a><a href="feed.rss" class="rss" title="RSS"><span class="icon-rss"></span></a></div></div></nav><main class="container"><div class="posts"><div class="post"><div class="post-header"><h2><a href="blog/2019/dynamically-loaded-dll-thows-accessviolationexception-on-first-function-call.html">Dynamically loaded DLL thows AccessViolationException on first function call</a></h2><div class="meta"><span class="date"><span class="icon-calendar"></span>October 22, 2019</span><span class="tags"><a href="tags/net/index.html"><span class="icon icon-price-tags"></span><span class="tagName">.net</span></a><a href="tags/csharp/index.html"><span class="icon icon-price-tags"></span><span class="tagName">c#</span></a></span></div></div><div class="content"><p>In my library <a href="https://github.com/smack0007/GLESDotNet">GLESDotNet</a> I load
the <code>libegl.dll</code> and <code>libglesv2.dll</code> DLLs dynamically via the Win32 functions
<a href="https://docs.microsoft.com/en-us/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibraryw">LoadLibrary</a>
and <a href="https://docs.microsoft.com/en-us/windows/win32/api/libloaderapi/nf-libloaderapi-getprocaddress">GetProcAddress</a>.
I already had everything working via <code>DLLImport</code> but I wanted to be able to
load the DLLs from different subdirectories depending on the architecture.</p>
<p>For the  first test I only loaded the <code>libegl.dll</code> DLL before moving on to
the <code>libglesv2.dll</code>. I made the classic programmer mistake of changing too much
at one time. The first call to any function in <code>libegl.dll</code> resulted in an
<code>AccessViolationException</code>. I couldn&#39;t figure out what was going wrong so I
decided to revert my changes and try again.</p>
<p>I noticed that when the DLLs were in the same directory the
<code>AccessViolationException</code> went away. Changing the working directory
to the directory of the DLLs also solved the problem once the DLLs
were placed in subdirectories again. This led me to believe that
loading <code>libegl.dll</code> must be implicitly loading <code>libglesv2.dll</code>. Loading
<code>libglesv2.dll</code> via <code>LoadLibrary</code> along with <code>libegl.dll</code> solved the problem.</p>
</div></div><div class="post"><div class="post-header"><h2><a href="blog/2019/abusing-idisposable.html">Abusing IDisposable</a></h2><div class="meta"><span class="date"><span class="icon-calendar"></span>August 27, 2019</span><span class="tags"><a href="tags/net/index.html"><span class="icon icon-price-tags"></span><span class="tagName">.net</span></a><a href="tags/csharp/index.html"><span class="icon icon-price-tags"></span><span class="tagName">c#</span></a></span></div></div><div class="content"><p>In C# the interface <code>IDisposable</code> is usually used to indicate that an object
needs to dispose of unmanaged resources. C# provides the <code>using</code> syntax to
ensure that the <code>Dispose</code> method is called once the instance of the object is
no longer needed.</p>
<p><code>Dispose</code> is just like any other method though and the <code>using</code> syntax can
be used quite nicely for other use cases as well. Let&#39;s create a class we
can use to collect some actions to be &quot;deferred&quot; until a later time.</p><a class="readMore" href="blog/2019/abusing-idisposable.html">Read More</a></div></div><div class="post"><div class="post-header"><h2><a href="blog/2019/generating-string-permutations-for-unit-testing.html">Generating string permutations for unit testing</a></h2><div class="meta"><span class="date"><span class="icon-calendar"></span>February 11, 2019</span><span class="tags"><a href="tags/net/index.html"><span class="icon icon-price-tags"></span><span class="tagName">.net</span></a><a href="tags/csharp/index.html"><span class="icon icon-price-tags"></span><span class="tagName">c#</span></a><a href="tags/nunit/index.html"><span class="icon icon-price-tags"></span><span class="tagName">nunit</span></a></span></div></div><div class="content"><p>I needed to parse a string containing 6 characters. Each character should only
be one of 3 possibilities: &#39;?&#39; for null, &#39;0&#39; for false or &#39;1&#39; for true. The problem
sounded easy enough to generate a whole bunch of unit tests for.</p><a class="readMore" href="blog/2019/generating-string-permutations-for-unit-testing.html">Read More</a></div></div><div class="post"><div class="post-header"><h2><a href="blog/2018/functional-card-deck-in-csharp.html">Functional Card Deck in C#</a></h2><div class="meta"><span class="date"><span class="icon-calendar"></span>October 11, 2018</span><span class="tags"><a href="tags/csharp/index.html"><span class="icon icon-price-tags"></span><span class="tagName">c#</span></a><a href="tags/fp/index.html"><span class="icon icon-price-tags"></span><span class="tagName">fp</span></a></span></div></div><div class="content"><p>I&#39;ve been inspired lately by Mark Seemann&#39;s series of posts about <a href="http://blog.ploeh.dk/2018/10/01/applicative-functors/">Applicative Functors</a>. One of the latest posts is an example about
creating a <a href="http://blog.ploeh.dk/2018/10/08/full-deck/">full deck</a> of cards. Most of posts up to this
point have contained a C# example but for some reason this one didn&#39;t. This inspired me to take a shot at it.</p><a class="readMore" href="blog/2018/functional-card-deck-in-csharp.html">Read More</a></div></div><div class="post"><div class="post-header"><h2><a href="blog/2018/enabling-the-latest-version-of-csharp.html">Enabling the latest version of C#</a></h2><div class="meta"><span class="date"><span class="icon-calendar"></span>June 21, 2018</span><span class="tags"><a href="tags/csharp/index.html"><span class="icon icon-price-tags"></span><span class="tagName">c#</span></a><a href="tags/msbuild/index.html"><span class="icon icon-price-tags"></span><span class="tagName">msbuild</span></a></span></div></div><div class="content"><p>As of this writing when creating a new console project via <code>dotnet new console</code> the version of C# used in the project
is version 7.0. This means you&#39;re missing out cool features like <a href="https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-7-1#default-literal-expressions">Default Literal Expressions</a>. The language version
can be changed via Visual Studio though I prefer to enable it via MSBuild. This can be done in the <code>csproj</code> file
or globally via a <code>Build.Directory.props</code> file. Changing the C# language version is done via a property known as <code>LangVersion</code>.</p>
<pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">PropertyGroup</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">LangVersion</span>&gt;</span>latest<span class="hljs-tag">&lt;/<span class="hljs-name">LangVersion</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">PropertyGroup</span>&gt;</span>
</code></pre>
<p> This property can set to any of the values listed <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/compiler-options/langversion-compiler-option">here</a>. As of
this writing VS Code doesn&#39;t seem to like it when you use 7.3 instead of latest. VS Code will show errors in your code
although the code will compile without any problems.</p>
</div></div></div><div class="clear"></div><nav aria-label="Page navigation"><ul class="pagination justify-content-center"><li class="page-item"><a href="tags/csharp/page3.html" class="page-link older">Older</a></li><li class="page-item"><a href="tags/csharp/index.html" class="page-link newer">Newer</a></li></ul></nav></main><footer class="p-13 p-md-5 mt-5 text-center text-muted bg-light"><div class="container"><ul class="links"><li><a href="https://twitter.com/smack0007" class="twitter" title="Twitter">Twitter</a></li><li><a href="https://github.com/smack0007" class="github" title="Github">GitHub</a></li><li><a href="https://paypal.me/smack0007" class="coffee" title="Buy me a Coffee">Buy me a Coffee</a></li><li><a href="feed.rss" class="rss" title="RSS">RSS</a></li></ul><p class="mb-0">The Blog of Zachary Snow</p></div></footer></div><script type="text/javascript">document.getElementById('navbar-toggler').onclick = function(){ document.getElementById('navbarSupportedContent').classList.toggle('collapse'); };</script></body></html>